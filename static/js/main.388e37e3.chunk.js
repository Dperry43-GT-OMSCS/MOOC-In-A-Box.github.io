(this["webpackJsonpmooc-in-a-box"]=this["webpackJsonpmooc-in-a-box"]||[]).push([[0],{323:function(e,t,a){e.exports=a(716)},327:function(e,t,a){},329:function(e,t,a){},330:function(e,t,a){},593:function(e,t,a){},604:function(e,t,a){},605:function(e,t,a){},606:function(e,t,a){},607:function(e,t,a){},608:function(e,t,a){},609:function(e,t,a){},610:function(e,t,a){},715:function(e,t,a){},716:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(14),c=a.n(o),s=(a(327),a(307)),i=a(8),l=a.n(i),u=a(12),d=a(98),p=a(99),m=a(21),h=a(102),f=a(103),v=(a(329),a(769)),b=a(770),C=a(763),E=a(717),g=a(75),O=a(24),y=a(304),x=a.n(y),k=(a(330),a(11)),j=a(754),w=(a(5),a(757)),S=a(759),L=a(760),N=a(761),U=a(762),F=a(53),R=a(161),I=a(290),T=a.n(I),A=a(291),H=a.n(A),V=Object(j.a)((function(e){return{root:{maxWidth:345,minWidth:345,maxHeight:400,minHeight:400,position:"relative"},media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:R.a[500]},actionsRow:{position:"absolute",bottom:0,left:0},content:{paddingBottom:"1rem"}}}));function B(e){var t=V(),a=r.a.useState(!1),n=Object(k.a)(a,2),o=(n[0],n[1],r.a.useState(!1)),c=Object(k.a)(o,2),s=c[0],i=c[1];e.isCourseAFavorite!=s&&i(e.isCourseAFavorite);return r.a.createElement(w.a,{variant:"outlined",className:t.root},r.a.createElement(S.a,{title:e.course.title,subheader:e.course.owner.displayName,action:r.a.createElement(E.a,{"aria-label":"add to favorites",onClick:function(){s?(i(!1),e.removeFavoriteClicked(e.course)):(i(!0),e.favoriteClicked(e.course))}},s?r.a.createElement(T.a,null):r.a.createElement(H.a,null))}),r.a.createElement(L.a,{className:t.media,image:"/static/images/cards/paella.jpg",title:"Paella dish"}),r.a.createElement(N.a,{className:t.content},r.a.createElement(F.a,{variant:"body2",color:"textSecondary",component:"p"},e.course.description),r.a.createElement(F.a,{variant:"body2",color:"textSecondary",component:"p"},e.course.owner.displayName)),r.a.createElement(U.a,{className:t.actionsRow,disableSpacing:!0},r.a.createElement(C.a,{variant:"contained",color:"secondary",component:O.b,to:"/courseOverview/".concat(e.course.id)},"Overview")))}a(336);var P=a(771),z=a(297),M=a.n(z),W=a(784);a(593);var D=function(e){return r.a.createElement("div",{className:"search-bar"},r.a.createElement(W.a,{value:e.searchValue,onChange:e.onChange,id:"outlined-search",type:"search",variant:"outlined",color:"secondary"}),r.a.createElement(E.a,{className:"menu-button",onClick:e.onSearchClicked},r.a.createElement(M.a,{className:"search-bar-icon"})))},G=a(306),J=a(789),q=a(764),K=a(765),Y=a(768),$=a(786),X=a(767);var Z=function(e){return r.a.createElement(X.a,{value:e.value,control:r.a.createElement($.a,null),label:e.value})};var Q=function(e){var t=e.options.map((function(e){return r.a.createElement(Z,{handleClick:e.associatedClickFunction,value:e.display})}));return r.a.createElement(G.a,{id:e.menuId,anchorEl:e.element,keepMounted:!0,open:Boolean(e.element),onClose:e.closeFunction},r.a.createElement(Y.a,null,r.a.createElement(q.a,{component:"fieldset"},r.a.createElement(K.a,{component:"legend"},e.menuLabel),r.a.createElement(J.a,{"aria-label":"gender",name:e.radioGroupName,value:e.menuValue,onChange:function(t){e.closeFunction(t.target.value)}},t))))};var _=function(e){var t=e.menuItems.map((function(e){return r.a.createElement(C.a,{color:"inherit",className:"menu-button",onClick:e.clickedFunction},e.buttonText)})),a=e.menuItems.map((function(e){return r.a.createElement(Q,{element:e.element,closeFunction:e.closeFunction,options:e.menuOptions,menuId:e.menuId,menuLabel:e.buttonText})}));return r.a.createElement(v.a,{position:"static",className:"course-library-app-bar"},r.a.createElement(b.a,null,t,r.a.createElement(D,{searchValue:e.searchInfo.value,onChange:e.searchInfo.onChange,onSearchClicked:e.searchInfo.onClick})),a)},ee=a(67),te=a.n(ee);te.a.initializeApp({apiKey:"AIzaSyA8tAHYGUiNkFHq6452W4Qr79eibVmtRZA",authDomain:"mooc-in-a-box.firebaseapp.com",databaseURL:"https://mooc-in-a-box.firebaseio.com",projectId:"mooc-in-a-box",storageBucket:"mooc-in-a-box.appspot.com",messagingSenderId:"594314585164",appId:"1:594314585164:web:3ae152452d1c238af100e9",measurementId:"G-LXH34JCXZS"});var ae=te.a.firestore(),ne=function(e){return ae.collection("Users").doc(e).get()},re=function(){return ae.collection("Users").get()},oe=function(){var e=Object(u.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ae.collection("Users").doc(t).set(a,{merge:!0}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ce=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ae.collection("Users").doc(t.uid).set({id:t.uid,name:t.displayName,photoURL:t.photoURL,email:t.email},{merge:!0}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=te.a.auth().currentUser;return e||void 0},ie=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=te.a.auth().currentUser,e.next=3,t.delete().then((function(){return document.cookie="userid=; expires=Thu, 01 Jan 1970 00:00:01 GMT;",!0})).catch((function(e){return console.log(e),!1}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(e){return ae.collection("Course").doc(e).get().then((function(t){if(t.exists){var a=t.data();return a.id=e,a}return null}))},ue=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ae.doc("Users/".concat(t.id)),r=ae.doc(a.chapter.lessons),a.chapter.lessons=r,e.next=5,ae.collection("Course").add({owner:n,title:a.title,description:a.description,chapters:a.chapters}).then(function(){var e=Object(u.a)(l.a.mark((function e(a){var n,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.createdCoursesRefs&&t.createdCoursesRefs.length>0?t.createdCoursesRefs:[],r=ae.doc("Course/".concat(a.id)),n.push(r),o={createdCoursesRefs:n},e.next=6,oe(t.id,o);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),de=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ae.doc("Course/".concat(a.id)),(r=t.favoritedCoursesRefs&&t.favoritedCoursesRefs.length>0?t.favoritedCoursesRefs:[]).push(n),o={favoritedCoursesRefs:r},e.next=6,oe(t.id,o);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),pe=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.favoritedCoursesRefs.filter((function(e){return e.id!==a.id})),r={favoritedCoursesRefs:n},e.next=4,oe(t.id,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),me=function(){var e=Object(u.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ae.collection("Course").doc(t).set(a,{merge:!0}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),he=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.stringify(a),r={overview:n},e.next=4,me(t.id,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),fe=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n={}).title=a.title,n.description=a.description,n.id=0,n.lessonsRef=[],t.chapters&&t.chapters.length>0?(n.id=t.chapters.length,t.chapters.push(n)):(t.chapters=[],t.chapters.push(n)),r={chapters:t.chapters},e.next=9,me(t.id,r);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ve=function(){var e=Object(u.a)(l.a.mark((function e(t,a,n,r){var o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=7;break}return delete n.id,e.next=4,ae.collection("Course").doc(t.id).collection("Lessons").add(n).then(function(){var e=Object(u.a)(l.a.mark((function e(n){var r,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ae.doc("Course/".concat(t.id,"/Lessons/").concat(n.id)),o=t.chapters.map((function(e){return e===a&&e.lessonsRef.push(r),e})),c={chapters:o},e.next=5,me(t.id,c);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 7:return o=ae.doc("Course/".concat(t.id,"/Lessons/").concat(n.id)),e.next=10,o.set(n,{merge:!0});case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),be=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t?new te.a.auth.GoogleAuthProvider:new te.a.auth.FacebookAuthProvider,n=[],r=void 0,o=void 0,e.next=6,re().then((function(e){e.forEach((function(e){var t=e.data();t.id=e.id,n.push(t)}))}));case 6:return e.next=8,te.a.auth().signInWithPopup(a).then(function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.user,n.forEach((function(e){e.id===o.uid&&(r=e)})),void 0!==r){e.next=5;break}return e.next=5,ce(o).then(Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se());case 1:case"end":return e.stop()}}),e)})))).catch((function(e){console.log(e)}));case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.a.auth().signOut().then((function(){return document.cookie="userid=; expires=Thu, 01 Jan 1970 00:00:01 GMT;",!0})).catch((function(e){return console.log(e),!1}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ee=function(e){return e.get().then((function(e){if(e.exists){var t=e.data();return t.id=e.id,t}return null}))},ge=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).sortByClicked=function(e){n.setState({sortByElement:e.currentTarget})},n.sortByHandleClose=function(e){n.setState({sortByElement:null,sortFilterValue:e})},n.topicClicked=function(e){n.setState({topicElement:e.currentTarget})},n.topicHandleClose=function(e){n.setState({topicElement:null,topicFilterValue:e})},n.organizationClicked=function(e){n.setState({organizationElement:e.currentTarget})},n.organizationHandleClosed=function(e){n.setState({organizationElement:null,organizationFilterValue:e})},n.buildMenuItems=function(){return[{buttonText:"Sort By",menuId:"menu-sort-by",clickedFunction:n.sortByClicked,closeFunction:n.sortByHandleClose,element:n.state.sortByElement,radioGroupName:"menuRadio",menuValue:n.state.sortFilterValue,menuOptions:[{display:"Newest",associatedClickFunction:n.sortByHandleClose},{display:"Recommended",associatedClickFunction:n.sortByHandleClose},{display:"Trending",associatedClickFunction:n.sortByHandleClose}]},{buttonText:"Topic",menuId:"menu-topic",clickedFunction:n.topicClicked,element:n.state.topicElement,closeFunction:n.topicHandleClose,radioGroupName:"topicRadio",menuValue:n.state.topicFilterValue,menuOptions:[{display:"Science",associatedClickFunction:n.topicHandleClose},{display:"Technology",associatedClickFunction:n.topicHandleClose},{display:"History",associatedClickFunction:n.topicHandleClose},{display:"Arts",associatedClickFunction:n.topicHandleClose}]},{buttonText:"Organization",menuId:"menu-organization",clickedFunction:n.organizationClicked,element:n.state.organizationElement,closeFunction:n.organizationHandleClosed,radioGroupName:"organizationRadio",menuValue:n.state.organizationFilterValue,menuOptions:[{display:"Required",associatedClickFunction:n.organizationHandleClosed},{display:"Recommended",associatedClickFunction:n.organizationHandleClosed},{display:"All Courses",associatedClickFunction:n.organizationHandleClosed}]}]},n.isCourseAFavorite=function(e,t){return!!(e.favoritedCourses&&e.favoritedCourses.length>0)&&e.favoritedCourses.find((function(e){return e.id===t.id}))},n.handleSearchChange=n.handleSearchChange.bind(Object(m.a)(n)),n.handleSearchClicked=n.handleSearchClicked.bind(Object(m.a)(n)),n.sortByClicked=n.sortByClicked.bind(Object(m.a)(n)),n.sortByHandleClose=n.sortByHandleClose.bind(Object(m.a)(n)),n.topicClicked=n.topicClicked.bind(Object(m.a)(n)),n.topicHandleClose=n.topicHandleClose.bind(Object(m.a)(n)),n.organizationClicked=n.organizationClicked.bind(Object(m.a)(n)),n.organizationHandleClosed=n.organizationHandleClosed.bind(Object(m.a)(n)),n.buildMenuItems=n.buildMenuItems.bind(Object(m.a)(n)),n.favoriteClicked=n.favoriteClicked.bind(Object(m.a)(n)),n.removeFavoriteClicked=n.removeFavoriteClicked.bind(Object(m.a)(n)),n.state={searchValue:"",sortByElement:null,topicElement:null,organizationElement:null,sortFilterValue:null,topicFilterValue:null,organizationFilterValue:null,activeCourses:e.courses},n}return Object(p.a)(a,[{key:"handleSearchChange",value:function(e){var t=e.target.value,a=t.toLowerCase();console.log(t);var n=this.props.courses.filter((function(e){var t,n,r;return(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(a))||(null===(n=e.description)||void 0===n?void 0:n.toLowerCase().includes(a))||(null===(r=e.owner.displayName)||void 0===r?void 0:r.toLowerCase().includes(a))}));this.setState({searchValue:t,activeCourses:n})}},{key:"handleSearchClicked",value:function(e){}},{key:"favoriteClicked",value:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de(this.props.user,t);case 2:this.props.updateUser(this.props.user.id);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeFavoriteClicked",value:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe(this.props.user,t);case 2:this.props.updateUser(this.props.user.id);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.buildMenuItems(),t=this.favoriteClicked,a=this.isCourseAFavorite,n=this.removeFavoriteClicked,o=this.props.user,c={value:this.state.searchValue,onChange:this.handleSearchChange,onClick:this.handleSearchClicked},s=[];return o&&(s=this.state.activeCourses.map((function(e){return r.a.createElement(P.a,{item:!0,s:4},r.a.createElement(B,{course:e,favoriteClicked:t,removeFavoriteClicked:n,isCourseAFavorite:a(o,e)}))}))),r.a.createElement("div",{class:"course-library"},r.a.createElement(_,{menuItems:e,searchInfo:c}),r.a.createElement("div",{className:"course-list"},r.a.createElement(P.a,{container:!0,spacing:3},s)))}}]),a}(r.a.Component),Oe=(a(604),a(772)),ye=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={redirectToReferrer:!1},n.loginGoogle=n.loginGoogle.bind(Object(m.a)(n)),n.loginFacebook=n.loginFacebook.bind(Object(m.a)(n)),n}return Object(p.a)(a,[{key:"loginGoogle",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be(!0).then((function(e){a.props.completeLogin(e),a.props.history.push("/courseLibrary"),a.setState({redirectToReferrer:!0})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"loginFacebook",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be(!1).then((function(e){a.props.completeLogin(e),a.props.history.push("/courseLibrary"),a.setState({redirectToReferrer:!0})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){if(this.props.loadingUser)return r.a.createElement("div",null,"Loading..",r.a.createElement(Oe.a,null));var e=(this.props.location.state||{from:{pathname:"/"}}).from;return!0===this.state.redirectToReferrer||this.props.user?r.a.createElement(g.a,{to:e}):r.a.createElement("div",{className:"login"},r.a.createElement("h1",null,"Sign into Mooc in a Box"),r.a.createElement(C.a,{color:"inherit",className:"menu-button",onClick:this.loginFacebook},"Sign in with Facebook"),r.a.createElement(C.a,{color:"inherit",className:"menu-button",onClick:this.loginGoogle},"Sign in with Google"))}}]),a}(r.a.Component),xe=Object(g.i)(ye),ke=(a(605),a(775)),je=a(776),we=a(309),Se=a(787),Le=a(773),Ne=a(774),Ue=a(97),Fe=a.n(Ue),Re=a(766),Ie=a(718),Te=a(119),Ae=a.n(Te);var He=function(e){return r.a.createElement(Se.a,null,r.a.createElement(Le.a,{expandIcon:r.a.createElement(Fe.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement(F.a,{variant:"subtitle2"},e.courses.length," Course(s)")),r.a.createElement(Ne.a,null,r.a.createElement(P.a,{container:!0,spacing:2},r.a.createElement(P.a,{item:!0,xs:12,md:6},r.a.createElement("div",null,r.a.createElement(Re.a,{dense:"true"},e.courses.map((function(t){return r.a.createElement("span",null,r.a.createElement(Ie.a,null,r.a.createElement(C.a,{component:O.b,to:"/courseOverview/".concat(t.id)},t.title),e.includeEditIcon&&r.a.createElement(E.a,{className:"menu-button",color:"inherit","aria-label":"menu",component:O.b,to:"/editCourse/".concat(t.id)},r.a.createElement(Ae.a,null))))}))))))))};function Ve(e){e.currentCourses.length;return r.a.createElement("div",null,r.a.createElement("h1",null," Current Courses "),r.a.createElement(He,{courses:e.currentCourses}))}function Be(e){return r.a.createElement("div",null,r.a.createElement("h1",null," Past Courses "),r.a.createElement(He,{courses:e.pastCourses}))}function Pe(e){return r.a.createElement("div",null,r.a.createElement("h1",null," Favorited Courses "),r.a.createElement(He,{courses:e.savedCourses}))}function ze(e){return r.a.createElement("div",null,r.a.createElement("h1",null," Created Courses "),r.a.createElement(He,{courses:e.createdCourses,includeEditIcon:!0}))}var Me=function(e){var t=Object(n.useState)(),a=Object(k.a)(t,2),o=a[0],c=a[1];if(r.a.useEffect((function(){c(e.user)}),[e]),o){var s=[],i=!1;if(o.currentCourses&&o.currentCourses.length>0){var l=r.a.createElement(Ve,{currentCourses:o.currentCourses});s.push(l),i=!0}if(o.pastCourses&&o.pastCourse.length>0){var u=r.a.createElement(Be,{pastCourses:o.pastCourses});s.push(u),i=!0}if(o.favoritedCourses&&o.favoritedCourses.length>0){var d=r.a.createElement(Pe,{savedCourses:o.favoritedCourses});s.push(d),i=!0}if(o.createdCourses&&o.createdCourses.length>0){var p=r.a.createElement(ze,{createdCourses:o.createdCourses});s.push(p),i=!0}return i?r.a.createElement("div",{className:"MyCourses"},r.a.createElement(ke.a,null),r.a.createElement(F.a,{className:"center",variant:"h3",component:"h3"},"My Courses"),r.a.createElement(je.a,{maxWidth:"lg"},r.a.createElement(we.a,{className:"paper"},s.map((function(e){return e}))))):r.a.createElement("div",{className:"MyCourses"},r.a.createElement(ke.a,null),r.a.createElement(F.a,{className:"center",variant:"h3",component:"h3"},"My Courses"),r.a.createElement(je.a,{maxWidth:"lg"},r.a.createElement(we.a,{className:"paper"},r.a.createElement("h4",null,"You don't have any courses saved yet!"))))}return r.a.createElement("div",null,"Loading..",r.a.createElement(Oe.a,null))},We=a(160),De=(a(606),a(781)),Ge=a(788),Je=a(780),qe=a(778),Ke=a(779),Ye=a(777);var $e=function(e){return r.a.createElement("div",null,r.a.createElement(Ge.a,{open:e.isOpen,onClose:e.handleClose,"aria-labelledby":"form-dialog-title"},r.a.createElement(Ye.a,{id:"form-dialog-title"},e.field),r.a.createElement(qe.a,null,r.a.createElement(Ke.a,null,"Edit the Field below to update your ",e.field),r.a.createElement(W.a,{autoFocus:!0,margin:"dense",id:"name",label:e.field,value:e.value,onChange:e.onChange,type:"email",color:"secondary",fullWidth:!0})),r.a.createElement(Je.a,null,r.a.createElement(C.a,{onClick:e.handleClose,color:"secondary"},"Cancel"),r.a.createElement(C.a,{onClick:e.handleSubmit,color:"secondary"},"Submit"))))},Xe={displayName:"Display Name",email:"Email Address",password:"Password"};var Ze=function(e){return r.a.createElement("div",null,r.a.createElement(F.a,{align:"center",variant:"h6",component:"h6"},r.a.createElement("strong",null,e.displayValue)),r.a.createElement(F.a,{align:"center",variant:"body1",component:"body1"},r.a.createElement("span",null,e.value,e.isEditable?r.a.createElement(E.a,{className:"menu-button",color:"inherit","aria-label":"menu"},r.a.createElement(Ae.a,{onClick:e.openDialog})):r.a.createElement("div",null))),r.a.createElement($e,{isOpen:e.isDialogOpen,handleClose:e.handleClose,handleSubmit:e.handleSubmit,field:Xe[e.displayKey],value:e.value,onChange:e.onChange}))};var Qe=Object(g.i)((function(e){var t=Object(n.useState)(null),a=Object(k.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(null),i=Object(k.a)(s,2),d=i[0],p=i[1],m=Object(n.useState)(),h=Object(k.a)(m,2),f=(h[0],h[1],Object(n.useState)(!1)),v=Object(k.a)(f,2),b=v[0],E=v[1],g=Object(n.useState)(null),O=Object(k.a)(g,2),y=O[0],x=O[1],j=Object(n.useState)(null),w=Object(k.a)(j,2),S=w[0],L=w[1],N=Object(n.useState)(!1),U=Object(k.a)(N,2),R=U[0],I=U[1];function T(){return(T=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ce().then((function(t){t&&(e.history.push("/"),e.updateUser(void 0))}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(){return(A=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ie().then((function(t){t&&(e.history.push("/"),e.updateUser(void 0))}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return e.user&&null===o&&null===y&&(c(e.user.displayName),x(e.user.interests)),e.user?r.a.createElement("div",{className:"userProfile"},r.a.createElement(ke.a,null),r.a.createElement(F.a,{className:"center",variant:"h3",component:"h3"},"User Profile"),r.a.createElement(je.a,{className:"userProfile-bottom-padding",maxWidth:"lg"},r.a.createElement(we.a,{className:"paper"},r.a.createElement(Ze,Object(We.a)({isEditable:!0,displayValue:"User Interests",value:y,handleClose:function(){x(S),I(!1)},handleSubmit:function(){oe(e.user.id,{interests:y}).then((function(t){I(!1),x(y),e.updateUser(e.user.id)})).catch((function(e){console.log(e)}))},isDialogOpen:R,openDialog:function(){L(y),I(!0)},onChange:function(e){x(e.target.value)}},"isEditable",!0)))),r.a.createElement(De.a,null),r.a.createElement(je.a,{maxWidth:"lg"},r.a.createElement(we.a,{className:"paper"},r.a.createElement(Ze,{isEditable:!0,displayValue:"Display Name",value:o,handleClose:function(){c(d),E(!1)},handleSubmit:function(){oe(e.user.id,{displayName:o}).then((function(t){E(!1),p(o),e.updateUser(e.user.id)})).catch((function(e){console.log(e)}))},isDialogOpen:b,openDialog:function(){p(o),E(!0)},onChange:function(e){c(e.target.value)}}),r.a.createElement(De.a,null),r.a.createElement(Ze,{isEditable:!1,displayValue:"Email",value:e.user.email}),r.a.createElement(De.a,null),r.a.createElement("div",{className:"logout-btns"},r.a.createElement(C.a,{color:"inherit",className:"menu-button",onClick:function(){return T.apply(this,arguments)}},"Sign out"),r.a.createElement(C.a,{color:"inherit",className:"menu-button",onClick:function(){return A.apply(this,arguments)}},"Delete account"))))):r.a.createElement("div",null,"Loading..",r.a.createElement(Oe.a,null))}));a(607);var _e=function(e){var t=Object(n.useState)(),a=Object(k.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(),i=Object(k.a)(s,2),l=i[0],u=i[1];return r.a.createElement("div",null,r.a.createElement(Ge.a,{open:e.isOpen,onClose:e.handleClose,"aria-labelledby":"form-dialog-title"},r.a.createElement(Ye.a,{id:"form-dialog-title"},"Create A New Course"),r.a.createElement(qe.a,null,r.a.createElement(Ke.a,null,"Create a new course. Start by entering a title and description below!"),r.a.createElement(W.a,{autoFocus:!0,margin:"dense",id:"title",label:"Course Title",onChange:function(e){u(e.target.value)},type:"text",color:"secondary",fullWidth:!0}),r.a.createElement(W.a,{margin:"dense",id:"description",label:"Course Description",onChange:function(e){c(e.target.value)},type:"text",color:"secondary",fullWidth:!0})),r.a.createElement(Je.a,null,r.a.createElement(C.a,{onClick:e.handleClose,color:"secondary"},"Cancel"),r.a.createElement(C.a,{onClick:function(){var t={title:l,description:o};e.handleSubmit(t)},color:"secondary"},"Submit"))))};function et(e){return r.a.createElement("div",{className:"courses-section"},r.a.createElement("h1",null," Courses You've Created "),r.a.createElement(He,{courses:e.createdCourses,includeEditIcon:!0}))}var tt=function(e){var t=Object(n.useState)(!1),a=Object(k.a)(t,2),o=a[0],c=a[1],s=Object(g.g)();function i(){return(i=Object(u.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.owner=e.user.id,n={id:0,lessons:"Course/rlfxOavBn4nPZLNTRMkL/Lessons/kL5CwNARpoUhexocK7P4",sectionTitle:"".concat(a.title," - Section")},a.chapters=[],a.chapter=n,t.next=6,ue(e.user,a);case 6:return t.sent,c(!1),t.next=10,e.updateCourses();case 10:return t.next=12,e.updateUser(e.user.id);case 12:s.push("/editCourse/".concat(e.user.createdCoursesRefs[e.user.createdCoursesRefs.length-1].id));case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var d=null;return d=e.user&&e.user.createdCourses&&e.user.createdCourses.length>0?r.a.createElement(et,{createdCourses:e.user.createdCourses}):r.a.createElement("h3",null,"You have not created any courses"),r.a.createElement("div",{className:"Home"},r.a.createElement(ke.a,null),r.a.createElement(F.a,{className:"center",variant:"h3",component:"h3"},"Create A Course"),r.a.createElement(je.a,{className:"userProfile-bottom-padding",maxWidth:"lg"},r.a.createElement(we.a,{className:"paper"},d,r.a.createElement("span",null,r.a.createElement(C.a,{variant:"contained",color:"secondary",onClick:function(){c(!0)}},"Create New Course")))),r.a.createElement(De.a,null),r.a.createElement(_e,{isOpen:o,handleClose:function(){c(!1)},handleSubmit:function(e){return i.apply(this,arguments)},user:e.user}))},at=(a(608),a(609),a(782));a(610);var nt=function(e){var t,a,n,o=[];return(null===(t=e.chapter)||void 0===t||null===(a=t.lessons)||void 0===a?void 0:a.length)>0?o=e.chapter.lessons.map((function(t){var a=t===e.activeLesson;return r.a.createElement(Ie.a,{selected:a,onClick:function(){return function(t){e.setChapterInContext(e.chapter),e.setActiveLesson(t)}(t)},id:t.id,button:!0},r.a.createElement(at.a,{primary:t.title}))})):o[0]=r.a.createElement(Ie.a,null," ",r.a.createElement(at.a,{primary:"No Lessons Added"})," "),e.editable&&(n=r.a.createElement(C.a,{variant:"contained",onClick:function(){e.setChapterInContext(e.chapter),e.openLessonModal(!0)},color:"secondary",className:"add-content-btn"}," Add New Lesson ")),r.a.createElement(Se.a,{defaultExpanded:e.chapter===e.chapterInContext},r.a.createElement(Le.a,{expandIcon:r.a.createElement(Fe.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement(F.a,{variant:"subtitle2"},e.chapter.title)),r.a.createElement(Ne.a,null,r.a.createElement(Re.a,{dense:"true",className:"lessons-list"},o,n)))};var rt=function(e){var t,a;function n(t){e.setChapterInContext(t)}var o,c=[];return(null===(t=e.course)||void 0===t||null===(a=t.chapters)||void 0===a?void 0:a.length)>0&&(c=e.course.chapters.map((function(t){return r.a.createElement(nt,{editable:e.editable,setActiveLesson:e.setActiveLesson,activeLesson:e.activeLesson,openLessonModal:e.openLessonModal,chapterInContext:e.chapterInContext,setChapterInContext:n,chapter:t})}))),e.editable&&(o=r.a.createElement(C.a,{variant:"contained",onClick:e.openCreateChapterDialog,color:"secondary"}," Add New Chapter ")),r.a.createElement(we.a,{className:"paper"},r.a.createElement(C.a,{id:"course-overview",onClick:function(){e.setActiveLesson(void 0),e.setChapterInContext(void 0)}},r.a.createElement("h1",null,e.course.title)),c,o)},ot=a(298),ct=a(299),st=a(302),it=a.n(st),lt=a(303),ut=a.n(lt),dt={opts:{height:"390",width:"640",playerVars:{autoplay:0}},videoId:"BKorP55Aqvg"};var pt=function(e){function t(){e.navigateToPreviousLesson(e.lesson)}function a(){e.navigateToNextLesson(e.lesson)}if(e.lesson){var n=function(){var t,a=Object(ot.a)({},dt),n=null===(t=e.lesson)||void 0===t?void 0:t.video;if(n&&n.includes("youtube")&&n.includes("v=")){var r=n.split("?"),o=new URLSearchParams(r[1]);a.videoId=o.get("v")}return a}();return r.a.createElement("div",null,r.a.createElement("h3",null,e.lesson.title),r.a.createElement("h6",null,"Link: ",e.lesson.video),r.a.createElement("strong",null,"Description: "),r.a.createElement("p",null,e.lesson.description),r.a.createElement(ct.a,{videoId:n.videoId,opts:n.opts,onReady:function(e){e.target.pauseVideo()}}),function(){return e.isFirstLesson&&e.isLastLesson?"":((e.nextLesson||e.nextChapter)&&(n=r.a.createElement(C.a,{variant:"contained",onClick:a,className:"next-button",color:"secondary",endIcon:r.a.createElement(it.a,null)},e.nextLesson?"Next Lesson":"Next Chapter")),(e.prevLesson||e.prevChapter)&&(o=r.a.createElement(C.a,{variant:"contained",onClick:t,className:"previous-button",color:"secondary",startIcon:r.a.createElement(ut.a,null)},e.prevLesson?"Previous Lesson":"Previous Chapter")),r.a.createElement("div",{className:"button-div"},n,o));var n,o}())}return r.a.createElement("div",null,r.a.createElement("h5",null," No Lesson Details "))},mt=a(121),ht=a(40);a(715),a(289);var ft=function(e){for(var t,a,n=[],o=0;o<e.course.chapters.length;o++)for(var c=0;c<(null===(s=e.course.chapters[o].lessons)||void 0===s?void 0:s.length);c++){var s;n.push(e.course.chapters[o].lessons[c])}e.editable&&(t=r.a.createElement(C.a,{onClick:e.openEditCourseOverviewDialog,color:"secondary",variant:"contained"}," Edit Overview "),a=r.a.createElement(C.a,{variant:"contained",onClick:function(){e.openLessonModal(!1)},color:"secondary",className:"add-content-btn"}," Edit Lesson "));var i=void 0;if(e.course.overview){var l=JSON.parse(e.course.overview),u=ht.EditorState.createWithContent(Object(ht.convertFromRaw)(l));i=r.a.createElement(mt.Editor,{toolbarHidden:!0,editorState:u,readOnly:!0})}else i=r.a.createElement(mt.Editor,{toolbarHidden:!0,editorState:ht.EditorState.createWithContent(ht.ContentState.createFromText("No text entered.")),readOnly:!0});var d,p,m,h=!1;if(e.activeLesson){var f=function(){var t,a,r,o=!1;if(e.activeLesson){var c=n.indexOf(e.activeLesson),s=e.activeChapter.lessons.indexOf(e.activeLesson),i=e.activeChapter.lessons.length,l=e.course.chapters.length,u=e.course.chapters.indexOf(e.activeChapter);t=s>0,a=s<i-1,r=0===s&&c>0,o=s===i-1&&c<n.length-1&&u!==l-1}return[t,a,r,o]}(),v=Object(k.a)(f,4);d=v[0],p=v[1],m=v[2],h=v[3]}return r.a.createElement(we.a,{className:"paper"},e.activeChapter?r.a.createElement("div",null,r.a.createElement("h2",null,"Chapter: ",e.activeChapter.title),r.a.createElement(pt,{navigateToNextLesson:function(t){console.log("NAVIGATE TO NEXT LESSON FROM: ",t);var a=e.activeChapter.lessons.indexOf(t);if(a===e.activeChapter.lessons.length-1){var n=e.course.chapters.indexOf(e.activeChapter),r=e.course.chapters[n+1];e.setChapterInContext(r),e.setActiveLesson(r.lessons[0])}else e.setActiveLesson(e.activeChapter.lessons[a+1])},navigateToPreviousLesson:function(t){console.log("NAVIGATE TO PREVIOUS LESSON FROM: ",t);var a=e.activeChapter.lessons.indexOf(t);if(0===a){var n=e.course.chapters.indexOf(e.activeChapter),r=e.course.chapters[n-1];e.setChapterInContext(r),e.setActiveLesson(r.lessons[r.lessons.length-1])}else e.setActiveLesson(e.activeChapter.lessons[a-1])},prevLesson:d,nextLesson:p,prevChapter:m,nextChapter:h,lesson:e.activeLesson}),a):r.a.createElement("div",null,i,t))};var vt=function(e){var t=Object(n.useState)(),a=Object(k.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(),i=Object(k.a)(s,2),l=i[0],u=i[1];return r.a.createElement("div",null,r.a.createElement(Ge.a,{open:e.isOpen,onClose:e.handleClose,"aria-labelledby":"form-dialog-title"},r.a.createElement(Ye.a,{id:"form-dialog-title"},"Create New Chapter"),r.a.createElement(qe.a,null,r.a.createElement(Ke.a,null,"Create a new chapter within your course. Enter a title and description below."),r.a.createElement(W.a,{autoFocus:!0,margin:"dense",id:"title",label:"Chapter Title",onChange:function(e){u(e.target.value)},type:"text",color:"secondary",fullWidth:!0}),r.a.createElement(W.a,{margin:"dense",id:"description",label:"Chapter Description",onChange:function(e){c(e.target.value)},type:"text",color:"secondary",fullWidth:!0})),r.a.createElement(Je.a,null,r.a.createElement(C.a,{onClick:e.handleClose,color:"secondary"},"Cancel"),r.a.createElement(C.a,{onClick:function(t){var a={title:l,description:o};e.handleSubmit(a)},color:"secondary"},"Submit"))))};var bt=function(e){var t=Object(n.useState)(),a=Object(k.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(),i=Object(k.a)(s,2),l=i[0],u=i[1],d=Object(n.useState)(),p=Object(k.a)(d,2),m=p[0],h=p[1],f=Object(n.useState)(!1),v=Object(k.a)(f,2),b=v[0],E=v[1],g=Object(n.useState)(!1),O=Object(k.a)(g,2),y=O[0],x=O[1],j=Object(n.useState)(!1),w=Object(k.a)(j,2),S=w[0],L=w[1];return Object(n.useEffect)((function(){!e.add&&e.lesson?(console.log("Coming in here...."),u(e.lesson.title),c(e.lesson.description),h(e.lesson.video)):(u(),c(),h())}),[e]),r.a.createElement("div",null,r.a.createElement(Ge.a,{open:e.isOpen,onClose:function(){u(),h(),c(),x(!1),E(!1),L(!1),e.handleClose()},"aria-labelledby":"form-dialog-title"},r.a.createElement(Ye.a,{id:"form-dialog-title"},e.add?"Create New":"Edit"," Lesson"),r.a.createElement(qe.a,null,e.add?r.a.createElement(Ke.a,null,"Add a new lesson to your course"):r.a.createElement(Ke.a,null,"Edit existing lesson"),r.a.createElement(W.a,{autoFocus:!0,required:!0,margin:"dense",error:y,id:"title",label:"Lesson Title",onChange:function(e){u(e.target.value)},type:"text",color:"secondary",value:l,helperText:y?"Title is a required field":"",fullWidth:!0}),r.a.createElement(W.a,{margin:"dense",required:!0,error:b,id:"description",label:"Lesson Description",onChange:function(e){c(e.target.value)},type:"text",color:"secondary",value:o,helperText:b?"Description is a required field":"",fullWidth:!0}),r.a.createElement(W.a,{margin:"dense",error:S,id:"video",label:"Video URL",onChange:function(e){h(e.target.value)},type:"text",color:"secondary",value:m,helperText:S?"Youtube URL is malformed. It must have the form: https://www.youtube.com?v=<SomeCharacterString>":"",fullWidth:!0})),r.a.createElement(Je.a,null,r.a.createElement(C.a,{onClick:e.handleClose,color:"secondary"},"Cancel"),r.a.createElement(C.a,{onClick:function(t){var a,n=(null===(a=e.lesson)||void 0===a?void 0:a.id)?e.lesson.id:void 0;if(console.log("TITLE: ",l),(l&&l.length>0?(x(!1),1):(x(!0),console.log("TITLE ERROR: ",y),0))&&(console.log("DESCRIPTION: ",o),o&&o.length>0?(E(!1),1):(E(!0),0))&&(m&&m.includes("youtube")&&m.includes("v=")?(L(!1),1):(L(!0),0))){var r={id:n,title:l,description:o,video:m};e.updateLesson(r,e.add)}},color:"secondary"},"Submit"))))};var Ct=function(e){var t=Object(n.useState)(),a=Object(k.a)(t,2),o=(a[0],a[1],Object(n.useState)(e.course.overview)),c=Object(k.a)(o,2),s=c[0],i=c[1],l=Object(n.useState)(),u=Object(k.a)(l,2),d=u[0],p=u[1];return Object(n.useEffect)((function(){p(s?ht.EditorState.createWithContent(Object(ht.convertFromRaw)(JSON.parse(s))):ht.EditorState.createEmpty())}),[]),r.a.createElement("div",null,r.a.createElement(Ge.a,{open:e.isOpen,onClose:e.handleClose,"aria-labelledby":"form-dialog-title"},r.a.createElement(Ye.a,{id:"form-dialog-title"},"Edit Course Overview"),r.a.createElement(qe.a,null,r.a.createElement(Ke.a,null,"Edit course information, providing students with a basic description of the class and learning objectives."),r.a.createElement(mt.Editor,{editorState:d,editorClassName:"editor-textbox",handleKeyCommand:function(e){var t=ht.RichUtils.handleKeyCommand(d,e);return t?(p(t),"handled"):"not-handled"},onEditorStateChange:function(e){p(e)}})),r.a.createElement(Je.a,null,r.a.createElement(C.a,{onClick:e.handleClose,color:"secondary"},"Cancel"),r.a.createElement(C.a,{onClick:function(t){var a=d.getCurrentContent();i(Object(ht.convertToRaw)(a)),e.updateCourseOverview(Object(ht.convertToRaw)(a))},color:"secondary"},"Submit"))))};var Et=Object(g.i)((function(e){var t,a,o=Object(g.h)().id,c=Object(n.useState)(),s=Object(k.a)(c,2),i=s[0],d=s[1],p=Object(n.useState)(),m=Object(k.a)(p,2),h=(m[0],m[1],Object(n.useState)(!1)),f=Object(k.a)(h,2),v=f[0],b=f[1],E=Object(n.useState)(!1),O=Object(k.a)(E,2),y=O[0],x=O[1],j=Object(n.useState)(!1),w=Object(k.a)(j,2),S=w[0],L=w[1],N=Object(n.useState)(),U=Object(k.a)(N,2),F=U[0],R=U[1],I=Object(n.useState)(),T=Object(k.a)(I,2),A=T[0],H=T[1],V=Object(n.useState)(),B=Object(k.a)(V,2),z=B[0],M=B[1];function W(e){M(e),x(!0)}function D(){return(D=Object(u.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!1),e.next=3,ve(i,F,t,a).then((function(){X(o)})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!1),console.log(t),e.next=4,he(i,t);case 4:X(o);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe(i,t);case 2:X(o),b(!1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return K.apply(this,arguments)}function K(){return(K=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((null===(a=t.lessonsRef)||void 0===a?void 0:a.length)>0)){e.next=5;break}return e.abrupt("return",Promise.all(t.lessonsRef.map(function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){return t.lessons=e,t})));case 5:return e.abrupt("return",Promise.resolve(t));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return $.apply(this,arguments)}function $(){return($=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map((function(e){return q(e)}))));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(t);case 2:return a=e.sent,e.next=5,Y(a.chapters);case 5:a.chapters=e.sent,d(a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){o&&X(o)}),[o]),e.editable&&(t=r.a.createElement("div",null,r.a.createElement(vt,{isOpen:v,handleSubmit:function(e){return J.apply(this,arguments)},handleClose:function(){b(!1)}}),r.a.createElement(bt,{isOpen:y,add:z,lesson:A,updateLesson:function(e,t){return D.apply(this,arguments)},handleClose:function(){x(!1)}}),r.a.createElement(Ct,{isOpen:S,updateCourseOverview:function(e){return G.apply(this,arguments)},handleClose:function(){L(!1)},course:i})),a=r.a.createElement(C.a,{variant:"contained",color:"secondary",onClick:function(){H(void 0),R(void 0),e.history.push("/courseOverview/".concat(i.id))}}," View Published Course ")),i?r.a.createElement("div",{className:"edit-course"},r.a.createElement(P.a,{container:!0,spacing:3},r.a.createElement(P.a,{item:!0,xs:4},r.a.createElement(rt,{editable:e.editable,activeLesson:A,setActiveLesson:H,openLessonModal:W,chapterInContext:F,setChapterInContext:R,course:i,openCreateChapterDialog:function(){b(!0)}})),r.a.createElement(P.a,{item:!0,xs:8},r.a.createElement(ft,{setActiveLesson:H,setChapterInContext:R,editable:e.editable,activeChapter:F,activeLesson:A,course:i,openEditCourseOverviewDialog:function(){L(!0)},openLessonModal:W})),a),t):r.a.createElement("div",null,"Loading...",r.a.createElement(Oe.a,null))})),gt=a(305),Ot=a(783),yt=Object(gt.a)({palette:{primary:{light:"#f44336",main:"#f6eee7",dark:"#dbbca1"},secondary:{light:"#a17da5",main:"#87618c",dark:"#442b4a"}},typography:{useNextVariants:!0},overrides:{MuiButton:{root:{textTransform:"none"}}}}),xt=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).state={courses:[],users:[],currentUser:void 0,loadingUser:!0},e.fetchCourses=e.fetchCourses.bind(Object(m.a)(e)),e.fetchUsers=e.fetchUsers.bind(Object(m.a)(e)),e.render=e.render.bind(Object(m.a)(e)),e.updateUser=e.updateUser.bind(Object(m.a)(e)),e.setUser=e.setUser.bind(Object(m.a)(e)),e.getUserOnLoad=e.getUserOnLoad.bind(Object(m.a)(e)),e.fetchCourses().then((function(){e.getUserOnLoad()})),e}return Object(p.a)(a,[{key:"updateUser",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return this.setState({currentUser:void 0}),this.setState({loadingUser:!1}),e.abrupt("return");case 4:return e.next=6,ne(t).then((function(e){var t=e.data();if(t.createdCoursesRefs&&t.createdCoursesRefs.length>0){t.createdCoursesRefs.map((function(e){return a.state.courses.find((function(t){return t.id===e.id}))}));t.createdCourses=t.createdCoursesRefs.map((function(e){return a.state.courses.find((function(t){return t.id===e.id}))}))}t.pastCoursesRefs&&t.pastCoursesRefs.length>0&&(t.pastCourses=t.pastCoursesRefs.map((function(e){return a.state.courses.find((function(t){return t.id===e.id}))}))),t.favoritedCoursesRefs&&t.favoritedCoursesRefs.length>0&&(t.favoritedCourses=t.favoritedCoursesRefs.map((function(e){return a.state.courses.find((function(t){return t.id===e.id}))}))),a.setState({currentUser:t}),a.setState({loadingUser:!1})}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserOnLoad",value:function(){var e=se();if(e)this.updateUser(e.uid);else if(document.cookie.split(";").some((function(e){return e.trim().startsWith("userid=")}))){var t=document.cookie.replace(/(?:(?:^|.*;\s*)userid\s*\=\s*([^;]*).*$)|^.*$/,"$1");this.updateUser(t)}else this.updateUser(void 0)}},{key:"setUser",value:function(e){this.updateUser(e.id),document.cookie="userid=".concat(e.id)}},{key:"fetchCourses",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,ae.collection("Course").get().then((function(e){e.forEach((function(e){var n=e.data(),r=e.id;n.owner.get().then((function(e){n.owner=e.data()})),n.id=r,t.push(n),a.setState({courses:t})}))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchUsers",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,re().then((function(e){e.forEach((function(e){var n=e.data();n.id=e.id,t.push(n),a.setState({users:t})}))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=function(t){t.isLoggedIn;var a=Object(s.a)(t,["isLoggedIn"]);return e.state.currentUser?r.a.createElement(g.b,a):r.a.createElement(g.a,{to:{pathname:"/login",state:{from:a.location}}})};return r.a.createElement(Ot.a,{theme:yt},r.a.createElement(O.a,null,r.a.createElement("div",null,r.a.createElement("nav",{hidden:!this.state.currentUser},r.a.createElement(v.a,{position:"static"},r.a.createElement(b.a,null,r.a.createElement(C.a,{variant:"contained",color:"secondary",className:"menu-button main",component:O.b,to:"/courseLibrary"},"All Courses"),r.a.createElement(C.a,{variant:"contained",color:"secondary",className:"menu-button main",component:O.b,to:"/myCourses"},"My Courses"),r.a.createElement(C.a,{variant:"outlined",color:"secondary",className:"menu-button align-left",component:O.b,to:"/createCourse"},"Create a Course"),r.a.createElement(E.a,{className:"menu-button profile-icon",component:O.b,to:"/profile",color:"inherit","aria-label":"menu"},r.a.createElement(x.a,null))))),r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/login"},r.a.createElement(xe,{completeLogin:this.setUser,user:this.state.currentUser,loadingUser:this.state.loadingUser})),r.a.createElement(t,{path:"/(courseLibrary|)"},r.a.createElement(ge,{courses:this.state.courses,user:this.state.currentUser,updateUser:this.updateUser})),r.a.createElement(t,{path:"/courseOverview/:id"},r.a.createElement(Et,{editable:!1,user:this.state.currentUser})),r.a.createElement(t,{path:"/myCourses"},r.a.createElement(Me,{user:this.state.currentUser})),r.a.createElement(t,{path:"/profile"},r.a.createElement(Qe,{user:this.state.currentUser,updateUser:this.updateUser})),r.a.createElement(t,{path:"/createCourse"},r.a.createElement(tt,{user:this.state.currentUser,updateUser:this.updateUser,updateCourses:this.fetchCourses})),r.a.createElement(t,{path:"/editCourse/:id"},r.a.createElement(Et,{editable:!0,user:this.state.currentUser}))))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(xt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[323,1,2]]]);
//# sourceMappingURL=main.388e37e3.chunk.js.map