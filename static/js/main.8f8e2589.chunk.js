(this["webpackJsonpmooc-in-a-box"]=this["webpackJsonpmooc-in-a-box"]||[]).push([[0],{313:function(e,t,n){e.exports=n(695)},317:function(e,t,n){},319:function(e,t,n){},320:function(e,t,n){},583:function(e,t,n){},594:function(e,t,n){},595:function(e,t,n){},596:function(e,t,n){},597:function(e,t,n){},598:function(e,t,n){},599:function(e,t,n){},600:function(e,t,n){},695:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"getUserById",(function(){return ae})),n.d(a,"getCourseById",(function(){return re})),n.d(a,"getAllCourses",(function(){return oe})),n.d(a,"getAllUsers",(function(){return ce})),n.d(a,"updateUser",(function(){return se})),n.d(a,"createUser",(function(){return ie})),n.d(a,"getCurrentUser",(function(){return ue})),n.d(a,"logUserInUser",(function(){return le})),n.d(a,"signOut",(function(){return de})),n.d(a,"deleteUser",(function(){return pe})),n.d(a,"createCourse",(function(){return me})),n.d(a,"favoriteCourse",(function(){return fe})),n.d(a,"removeFavoriteCourse",(function(){return he})),n.d(a,"updateCourse",(function(){return ve})),n.d(a,"updateCourseOverview",(function(){return be})),n.d(a,"addNewChapter",(function(){return Ce})),n.d(a,"addNewLesson",(function(){return Ee})),n.d(a,"getCourseByIdEvaluatePromise",(function(){return ge})),n.d(a,"getDocFromDocRef",(function(){return ye}));var r=n(0),o=n.n(r),c=n(14),s=n.n(c),i=(n(317),n(7)),u=n.n(i),l=n(10),d=n(98),p=n(99),m=n(21),f=n(102),h=n(103),v=(n(319),n(748)),b=n(749),C=n(742),E=n(696),g=n(23),y=n(72),O=n(295),k=n.n(O),j=(n(320),n(12)),w=n(733),x=(n(5),n(736)),S=n(738),N=n(739),U=n(740),F=n(741),L=n(53),R=n(159),I=n(287),A=n.n(I),H=n(288),B=n.n(H),V=Object(w.a)((function(e){return{root:{maxWidth:345,minWidth:345,maxHeight:400,minHeight:400,position:"relative"},media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:R.a[500]},actionsRow:{position:"absolute",bottom:0,left:0},content:{paddingBottom:"1rem"}}}));function z(e){var t=V(),n=o.a.useState(!1),a=Object(j.a)(n,2),r=(a[0],a[1],o.a.useState(!1)),c=Object(j.a)(r,2),s=c[0],i=c[1];e.isCourseAFavorite!=s&&i(e.isCourseAFavorite);return o.a.createElement(x.a,{variant:"outlined",className:t.root},o.a.createElement(S.a,{title:e.course.title,subheader:e.course.owner.displayName,action:o.a.createElement(E.a,{"aria-label":"add to favorites",onClick:function(){s?(i(!1),e.removeFavoriteClicked(e.course)):(i(!0),e.favoriteClicked(e.course))}},s?o.a.createElement(A.a,null):o.a.createElement(B.a,null))}),o.a.createElement(N.a,{className:t.media,image:"/static/images/cards/paella.jpg",title:"Paella dish"}),o.a.createElement(U.a,{className:t.content},o.a.createElement(L.a,{variant:"body2",color:"textSecondary",component:"p"},e.course.description),o.a.createElement(L.a,{variant:"body2",color:"textSecondary",component:"p"},e.course.owner.displayName)),o.a.createElement(F.a,{className:t.actionsRow,disableSpacing:!0},o.a.createElement(C.a,{variant:"contained",color:"secondary",component:g.b,to:"/courseOverview/".concat(e.course.id)},"Overview")))}n(326);var T=n(750),D=n(294),P=n.n(D),W=n(763);n(583);var M=function(e){return o.a.createElement("div",{className:"search-bar"},o.a.createElement(W.a,{value:e.searchValue,onChange:e.onChange,id:"outlined-search",type:"search",variant:"outlined",color:"black"}),o.a.createElement(E.a,{className:"menu-button",onClick:e.onSearchClicked},o.a.createElement(P.a,{className:"search-bar-icon"})))},G=n(297),J=n(768),Y=n(743),$=n(744),K=n(747),Z=n(765),q=n(746);var X=function(e){return o.a.createElement(q.a,{value:e.value,control:o.a.createElement(Z.a,null),label:e.value})};var Q=function(e){var t=e.options.map((function(e){return o.a.createElement(X,{handleClick:e.associatedClickFunction,value:e.display})}));return o.a.createElement(G.a,{id:e.menuId,anchorEl:e.element,keepMounted:!0,open:Boolean(e.element),onClose:e.closeFunction},o.a.createElement(K.a,null,o.a.createElement(Y.a,{component:"fieldset"},o.a.createElement($.a,{component:"legend"},e.menuLabel),o.a.createElement(J.a,{"aria-label":"gender",name:e.radioGroupName,value:e.menuValue,onChange:function(t){e.closeFunction(t.target.value)}},t))))};var _=function(e){var t=e.menuItems.map((function(e){return o.a.createElement(C.a,{color:"inherit",className:"menu-button",onClick:e.clickedFunction},e.buttonText)})),n=e.menuItems.map((function(e){return o.a.createElement(Q,{element:e.element,closeFunction:e.closeFunction,options:e.menuOptions,menuId:e.menuId,menuLabel:e.buttonText})}));return o.a.createElement(v.a,{position:"static",className:"course-library-app-bar"},o.a.createElement(b.a,null,t,o.a.createElement(M,{searchValue:e.searchInfo.value,onChange:e.searchInfo.onChange,onSearchClicked:e.searchInfo.onClick})),n)},ee=n(62),te=n.n(ee);te.a.initializeApp({apiKey:"AIzaSyA8tAHYGUiNkFHq6452W4Qr79eibVmtRZA",authDomain:"mooc-in-a-box.firebaseapp.com",databaseURL:"https://mooc-in-a-box.firebaseio.com",projectId:"mooc-in-a-box",storageBucket:"mooc-in-a-box.appspot.com",messagingSenderId:"594314585164",appId:"1:594314585164:web:3ae152452d1c238af100e9",measurementId:"G-LXH34JCXZS"});var ne=te.a.firestore(),ae=function(e){return ne.collection("Users").doc(e).get()},re=function(e){return ne.collection("Course").doc(e).get()},oe=function(){return ne.collection("Course").get()},ce=function(){return ne.collection("Users").get()},se=function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ne.collection("Users").doc(t).set(n,{merge:!0}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ie=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ne.collection("Users").doc(t.uid).set({id:t.uid,name:t.displayName,photoURL:t.photoURL,email:t.email},{merge:!0}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=te.a.auth().currentUser;return e||void 0},le=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?new te.a.auth.GoogleAuthProvider:new te.a.auth.FacebookAuthProvider,a=[],r=void 0,o=void 0,e.next=6,ce().then((function(e){e.forEach((function(e){var t=e.data();t.id=e.id,a.push(t)}))}));case 6:return e.next=8,te.a.auth().signInWithPopup(n).then(function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.user,a.forEach((function(e){e.id===o.uid&&(r=e)})),void 0!==r){e.next=5;break}return e.next=5,ie(o).then(Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue());case 1:case"end":return e.stop()}}),e)})))).catch((function(e){console.log(e)}));case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.a.auth().signOut().then((function(){return document.cookie="userid=; expires=Thu, 01 Jan 1970 00:00:01 GMT;",!0})).catch((function(e){return console.log(e),!1}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=te.a.auth().currentUser,e.next=3,t.delete().then((function(){return document.cookie="userid=; expires=Thu, 01 Jan 1970 00:00:01 GMT;",!0})).catch((function(e){return console.log(e),!1}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te.a.storage(),a=ne.doc("Users/".concat(t.id)),r=ne.doc(n.chapter.lessons),n.chapter.lessons=r,e.next=6,ne.collection("Course").add({owner:a,title:n.title,description:n.description,chapters:n.chapters}).then(function(){var e=Object(l.a)(u.a.mark((function e(n){var a,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.createdCoursesRefs&&t.createdCoursesRefs.length>0?t.createdCoursesRefs:[],r=ne.doc("Course/".concat(n.id)),a.push(r),o={createdCoursesRefs:a},e.next=6,se(t.id,o);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),fe=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var a,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ne.doc("Course/".concat(n.id)),(r=t.favoritedCoursesRefs&&t.favoritedCoursesRefs.length>0?t.favoritedCoursesRefs:[]).push(a),o={favoritedCoursesRefs:r},e.next=6,se(t.id,o);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),he=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.favoritedCoursesRefs.filter((function(e){return e.id!==n.id})),r={favoritedCoursesRefs:a},e.next=4,se(t.id,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ve=function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ne.collection("Course").doc(t).set(n,{merge:!0}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),be=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.stringify(n),r={overview:a},e.next=4,ve(t.id,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a={}).title=n.title,a.description=n.description,a.id=0,a.lessonsRef=[],t.chapters&&t.chapters.length>0||(t.chapters=[]),t.chapters.push(a),r={chapters:t.chapters},e.next=9,ve(t.id,r);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(l.a)(u.a.mark((function e(t,n,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.collection("Course").doc(t.id).collection("Lessons").add(a).then(function(){var e=Object(l.a)(u.a.mark((function e(a){var r,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Lesson Doc",a),console.log("Course/".concat(t.id,"/Lessons/").concat(a.id)),r=ne.doc("Course/".concat(t.id,"/Lessons/").concat(a.id)),o=t.chapters.map((function(e){return e===n&&e.lessonsRef.push(r),e})),c={chapters:o},e.next=7,ve(t.id,c);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),ge=function(e){return ne.collection("Course").doc(e).get().then((function(t){if(t.exists){var n=t.data();return n.id=e,n}return null}))},ye=function(e){return e.get().then((function(e){if(e.exists){var t=e.data();return t.id=e.id,console.log(t),t}return null}))},Oe=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).sortByClicked=function(e){a.setState({sortByElement:e.currentTarget})},a.sortByHandleClose=function(e){a.setState({sortByElement:null,sortFilterValue:e})},a.topicClicked=function(e){a.setState({topicElement:e.currentTarget})},a.topicHandleClose=function(e){a.setState({topicElement:null,topicFilterValue:e})},a.organizationClicked=function(e){a.setState({organizationElement:e.currentTarget})},a.organizationHandleClosed=function(e){a.setState({organizationElement:null,organizationFilterValue:e})},a.buildMenuItems=function(){return[{buttonText:"Sort By",menuId:"menu-sort-by",clickedFunction:a.sortByClicked,closeFunction:a.sortByHandleClose,element:a.state.sortByElement,radioGroupName:"menuRadio",menuValue:a.state.sortFilterValue,menuOptions:[{display:"Newest",associatedClickFunction:a.sortByHandleClose},{display:"Recommended",associatedClickFunction:a.sortByHandleClose},{display:"Trending",associatedClickFunction:a.sortByHandleClose}]},{buttonText:"Topic",menuId:"menu-topic",clickedFunction:a.topicClicked,element:a.state.topicElement,closeFunction:a.topicHandleClose,radioGroupName:"topicRadio",menuValue:a.state.topicFilterValue,menuOptions:[{display:"Science",associatedClickFunction:a.topicHandleClose},{display:"Technology",associatedClickFunction:a.topicHandleClose},{display:"History",associatedClickFunction:a.topicHandleClose},{display:"Arts",associatedClickFunction:a.topicHandleClose}]},{buttonText:"Organization",menuId:"menu-organization",clickedFunction:a.organizationClicked,element:a.state.organizationElement,closeFunction:a.organizationHandleClosed,radioGroupName:"organizationRadio",menuValue:a.state.organizationFilterValue,menuOptions:[{display:"Required",associatedClickFunction:a.organizationHandleClosed},{display:"Recommended",associatedClickFunction:a.organizationHandleClosed},{display:"All Courses",associatedClickFunction:a.organizationHandleClosed}]}]},a.isCourseAFavorite=function(e,t){return!!(e.favoritedCourses&&e.favoritedCourses.length>0)&&e.favoritedCourses.find((function(e){return e.id===t.id}))},a.handleSearchChange=a.handleSearchChange.bind(Object(m.a)(a)),a.handleSearchClicked=a.handleSearchClicked.bind(Object(m.a)(a)),a.sortByClicked=a.sortByClicked.bind(Object(m.a)(a)),a.sortByHandleClose=a.sortByHandleClose.bind(Object(m.a)(a)),a.topicClicked=a.topicClicked.bind(Object(m.a)(a)),a.topicHandleClose=a.topicHandleClose.bind(Object(m.a)(a)),a.organizationClicked=a.organizationClicked.bind(Object(m.a)(a)),a.organizationHandleClosed=a.organizationHandleClosed.bind(Object(m.a)(a)),a.buildMenuItems=a.buildMenuItems.bind(Object(m.a)(a)),a.favoriteClicked=a.favoriteClicked.bind(Object(m.a)(a)),a.removeFavoriteClicked=a.removeFavoriteClicked.bind(Object(m.a)(a)),a.state={searchValue:"",sortByElement:null,topicElement:null,organizationElement:null,sortFilterValue:null,topicFilterValue:null,organizationFilterValue:null},a}return Object(p.a)(n,[{key:"handleSearchChange",value:function(e){this.setState({searchValue:e.target.value})}},{key:"handleSearchClicked",value:function(e){}},{key:"favoriteClicked",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe(this.props.user,t);case 2:this.props.updateUser(this.props.user.id);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeFavoriteClicked",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he(this.props.user,t);case 2:this.props.updateUser(this.props.user.id);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.buildMenuItems(),t=this.favoriteClicked,n=this.isCourseAFavorite,a=this.removeFavoriteClicked,r=this.props.user,c={value:this.state.searchValue,onChange:this.handleSearchChange,onClick:this.handleSearchClicked},s=[];return r&&(s=this.props.courses.map((function(e){return o.a.createElement(T.a,{item:!0,s:4},o.a.createElement(z,{course:e,favoriteClicked:t,removeFavoriteClicked:a,isCourseAFavorite:n(r,e)}))}))),o.a.createElement("div",{class:"course-library"},o.a.createElement(_,{menuItems:e,searchInfo:c}),o.a.createElement("div",{className:"course-list"},o.a.createElement(T.a,{container:!0,spacing:3},s)))}}]),n}(o.a.Component),ke=(n(594),n(754)),je=n(299);var we=function(e){return o.a.createElement("div",null,e.lesson?o.a.createElement("div",null,o.a.createElement("h3",null,e.lesson.title),o.a.createElement("h6",null,"Link: ",e.lesson.video),o.a.createElement("strong",null,"Description: "),o.a.createElement("p",null,e.lesson.description)):o.a.createElement("h3",null,"No lesson selected"))};var xe=function(e){return o.a.createElement(je.a,{className:"paper"},e.activeChapter?o.a.createElement("div",null,o.a.createElement("h2",null,"Chapter: ",e.activeChapter.title),o.a.createElement(we,{lesson:e.activeLesson})):o.a.createElement("p",null,"course overview"))},Se=(n(595),n(766)),Ne=n(752),Ue=n(753),Fe=n(97),Le=n.n(Fe),Re=n(745),Ie=n(697),Ae=n(751);var He=function(e){var t,n,a,r=[],c=null===(t=e.chapter)||void 0===t||null===(n=t.lessons)||void 0===n?void 0:n.length;return console.log(e.chapter),c>0?r=e.chapter.lessons.map((function(t){return o.a.createElement(Ie.a,{onClick:function(){return function(t){e.setChapterInContext(e.chapter),e.setActiveLesson(t)}(t)},id:t.id,button:!0},o.a.createElement(Ae.a,{primary:t.title}))})):r[0]=o.a.createElement(Ie.a,null," ",o.a.createElement(Ae.a,{primary:"No Lessons Added"})," "),e.editable&&(a=o.a.createElement(C.a,{variant:"contained",onClick:function(){e.setChapterInContext(e.chapter),e.openLessonModal(!0)},color:"secondary",className:"add-content-btn"}," Add New Lesson ")),o.a.createElement(Se.a,null,o.a.createElement(Ne.a,{expandIcon:o.a.createElement(Le.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},o.a.createElement(L.a,{variant:"subtitle2"},e.chapter.title)),o.a.createElement(Ue.a,null,o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12,md:6},o.a.createElement("div",null,o.a.createElement(Re.a,{dense:"true"},r,a))))))};var Be=function(e){var t,n;function a(t){e.setChapterInContext(t)}var r,c=[];return(null===(t=e.course)||void 0===t||null===(n=t.chapters)||void 0===n?void 0:n.length)>0&&(c=e.course.chapters.map((function(t){return o.a.createElement(He,{editable:e.editable,setActiveLesson:e.setActiveLesson,activeLesson:e.activeLesson,openLessonModal:e.openLessonModal,setChapterInContext:a,chapter:t})}))),e.editable&&(r=o.a.createElement(C.a,{variant:"contained",onClick:e.openCreateChapterDialog,color:"secondary"}," Add New Chapter ")),o.a.createElement(je.a,{className:"paper"},o.a.createElement(C.a,{id:"course-overview",onClick:function(){e.setActiveLesson(void 0),e.setChapterInContext(void 0)}},o.a.createElement("h1",null,e.course.title)),c,r)};var Ve=function(e){var t=Object(r.useState)(),n=Object(j.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(),i=Object(j.a)(s,2),d=i[0],p=i[1],m=Object(r.useState)(),f=Object(j.a)(m,2),h=f[0],v=f[1],b=Object(y.g)().id;function C(e){return E.apply(this,arguments)}function E(){return(E=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((null===(n=t.lessonRef)||void 0===n?void 0:n.length)>0)){e.next=5;break}return e.abrupt("return",Promise.all(t.lessonsRef.map(function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){return t.lessons=e,t})));case 5:return e.abrupt("return",Promise.resolve(t));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return O.apply(this,arguments)}function O(){return(O=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map((function(e){return C(e)}))));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge(t);case 2:if(!(n=e.sent).chapters){e.next=7;break}return e.next=6,g(n.chapters);case 6:n.chapters=e.sent;case 7:c(n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){b&&function(e){k.apply(this,arguments)}(b)}),[b]),a?o.a.createElement("div",{className:"courseOverview"},o.a.createElement(T.a,{container:!0,spacing:3},o.a.createElement(T.a,{item:!0,xs:4},o.a.createElement(Be,{editable:!1,activeLesson:d,setActiveLesson:p,setChapterInContext:v,course:a})),o.a.createElement(T.a,{item:!0,xs:8},o.a.createElement(xe,{activeChapter:h,activeLesson:d,course:a})))):o.a.createElement("div",null,"Loading...",o.a.createElement(ke.a,null))},ze=(n(596),function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={user:void 0},a.loginGoogle=a.loginGoogle.bind(Object(m.a)(a)),a.loginFacebook=a.loginFacebook.bind(Object(m.a)(a)),a}return Object(p.a)(n,[{key:"loginGoogle",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(!0).then((function(e){n.props.completeLogin(e),n.props.history.push("/myCourses")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"loginFacebook",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(!1).then((function(e){n.props.completeLogin(e),n.props.history.push("/myCourses")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement("div",{className:"login"},o.a.createElement("h1",null,"Sign into Mooc in a Box"),o.a.createElement(C.a,{color:"inherit",className:"menu-button",onClick:this.loginFacebook},"Sign in with Facebook"),o.a.createElement(C.a,{color:"inherit",className:"menu-button",onClick:this.loginGoogle},"Sign in with Google"))}}]),n}(o.a.Component)),Te=Object(y.h)(ze),De=(n(597),n(755)),Pe=n(756),We=n(120),Me=n.n(We);var Ge=function(e){return o.a.createElement(Se.a,null,o.a.createElement(Ne.a,{expandIcon:o.a.createElement(Le.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},o.a.createElement(L.a,{variant:"subtitle2"},e.courses.length," Course(s)")),o.a.createElement(Ue.a,null,o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12,md:6},o.a.createElement("div",null,o.a.createElement(Re.a,{dense:"true"},e.courses.map((function(t){return o.a.createElement("span",null,o.a.createElement(Ie.a,null,o.a.createElement(C.a,{component:g.b,to:"/courseOverview/".concat(t.id)},t.title),e.includeEditIcon&&o.a.createElement(E.a,{className:"menu-button",color:"inherit","aria-label":"menu",component:g.b,to:"/editCourse/".concat(t.id)},o.a.createElement(Me.a,null))))}))))))))};function Je(e){e.currentCourses.length;return o.a.createElement("div",null,o.a.createElement("h1",null," Current Courses "),o.a.createElement(Ge,{courses:e.currentCourses}))}function Ye(e){return o.a.createElement("div",null,o.a.createElement("h1",null," Past Courses "),o.a.createElement(Ge,{courses:e.pastCourses}))}function $e(e){return o.a.createElement("div",null,o.a.createElement("h1",null," Favorited Courses "),o.a.createElement(Ge,{courses:e.savedCourses}))}function Ke(e){return o.a.createElement("div",null,o.a.createElement("h1",null," Created Courses "),o.a.createElement(Ge,{courses:e.createdCourses,includeEditIcon:!0}))}var Ze=function(e){var t=Object(r.useState)(),n=Object(j.a)(t,2),a=n[0],c=n[1];if(o.a.useEffect((function(){c(e.user)}),[e]),a){var s=[],i=!1;if(a.currentCourses&&a.currentCourses.length>0){var u=o.a.createElement(Je,{currentCourses:a.currentCourses});s.push(u),i=!0}if(a.pastCourses&&a.pastCourse.length>0){var l=o.a.createElement(Ye,{pastCourses:a.pastCourses});s.push(l),i=!0}if(a.favoritedCourses&&a.favoritedCourses.length>0){var d=o.a.createElement($e,{savedCourses:a.favoritedCourses});s.push(d),i=!0}if(a.createdCourses&&a.createdCourses.length>0){var p=o.a.createElement(Ke,{createdCourses:a.createdCourses});s.push(p),i=!0}return i?o.a.createElement("div",{className:"MyCourses"},o.a.createElement(De.a,null),o.a.createElement(L.a,{className:"center",variant:"h3",component:"h3"},"My Courses"),o.a.createElement(Pe.a,{maxWidth:"lg"},o.a.createElement(je.a,{className:"paper"},s.map((function(e){return e}))))):o.a.createElement("div",{className:"MyCourses"},o.a.createElement(De.a,null),o.a.createElement(L.a,{className:"center",variant:"h3",component:"h3"},"My Courses"),o.a.createElement(Pe.a,{maxWidth:"lg"},o.a.createElement(je.a,{className:"paper"},o.a.createElement("h4",null,"You don't have any courses saved yet!"))))}return o.a.createElement("div",null,"Loading..",o.a.createElement(ke.a,null))},qe=(n(598),n(761)),Xe=n(767),Qe=n(760),_e=n(758),et=n(759),tt=n(757);var nt=function(e){return o.a.createElement("div",null,o.a.createElement(Xe.a,{open:e.isOpen,onClose:e.handleClose,"aria-labelledby":"form-dialog-title"},o.a.createElement(tt.a,{id:"form-dialog-title"},e.field),o.a.createElement(_e.a,null,o.a.createElement(et.a,null,"Edit the Field below to update your ",e.field),o.a.createElement(W.a,{autoFocus:!0,margin:"dense",id:"name",label:e.field,value:e.value,onChange:e.onChange,type:"email",fullWidth:!0})),o.a.createElement(Qe.a,null,o.a.createElement(C.a,{onClick:e.handleClose,color:"secondary"},"Cancel"),o.a.createElement(C.a,{onClick:e.handleSubmit,color:"secondary"},"Submit"))))},at={displayName:"Display Name",email:"Email Address",password:"Password"};var rt=function(e){return o.a.createElement("div",null,o.a.createElement(L.a,{align:"center",variant:"h6",component:"h6"},o.a.createElement("strong",null,e.displayValue)),o.a.createElement(L.a,{align:"center",variant:"body1",component:"body1"},o.a.createElement("span",null,e.value,o.a.createElement(E.a,{className:"menu-button",color:"inherit","aria-label":"menu"},o.a.createElement(Me.a,{onClick:e.openDialog})))),o.a.createElement(nt,{isOpen:e.isDialogOpen,handleClose:e.handleClose,handleSubmit:e.handleSubmit,field:at[e.displayKey],value:e.value,onChange:e.onChange}))};var ot=Object(y.h)((function(e){var t=Object(r.useState)(null),n=Object(j.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(null),i=Object(j.a)(s,2),d=i[0],p=i[1],m=Object(r.useState)(),f=Object(j.a)(m,2),h=(f[0],f[1],Object(r.useState)(!1)),v=Object(j.a)(h,2),b=v[0],E=v[1],g=Object(r.useState)(null),y=Object(j.a)(g,2),O=y[0],k=y[1],w=Object(r.useState)(null),x=Object(j.a)(w,2),S=x[0],N=x[1],U=Object(r.useState)(!1),F=Object(j.a)(U,2),R=F[0],I=F[1];function A(){return(A=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,de().then((function(t){t&&(e.history.push("/"),e.updateUser(void 0))}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function H(){return(H=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pe().then((function(t){t&&(e.history.push("/"),e.updateUser(void 0))}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return e.user&&null===a&&null===O&&(c(e.user.displayName),k(e.user.interests)),e.user?o.a.createElement("div",{className:"userProfile"},o.a.createElement(De.a,null),o.a.createElement(L.a,{className:"center",variant:"h3",component:"h3"},"User Profile"),o.a.createElement(Pe.a,{className:"userProfile-bottom-padding",maxWidth:"lg"},o.a.createElement(je.a,{className:"paper"},o.a.createElement(rt,{displayValue:"User Interests",value:O,handleClose:function(){k(S),I(!1)},handleSubmit:function(){se(e.user.id,{interests:O}).then((function(t){I(!1),k(O),e.updateUser(e.user.id)})).catch((function(e){console.log(e)}))},isDialogOpen:R,openDialog:function(){N(O),I(!0)},onChange:function(e){k(e.target.value)}}))),o.a.createElement(qe.a,null),o.a.createElement(Pe.a,{maxWidth:"lg"},o.a.createElement(je.a,{className:"paper"},o.a.createElement(rt,{displayValue:"Display Name",value:a,handleClose:function(){c(d),E(!1)},handleSubmit:function(){se(e.user.id,{displayName:a}).then((function(t){E(!1),p(a),e.updateUser(e.user.id)})).catch((function(e){console.log(e)}))},isDialogOpen:b,openDialog:function(){p(a),E(!0)},onChange:function(e){c(e.target.value)}}),o.a.createElement(qe.a,null),o.a.createElement(rt,{displayValue:"Email",value:e.user.email}),o.a.createElement(qe.a,null),o.a.createElement(rt,{displayValue:"Password",value:"*******"}),o.a.createElement(C.a,{color:"inherit",className:"menu-button",onClick:function(){return A.apply(this,arguments)}},"Sign out"),o.a.createElement(C.a,{color:"inherit",className:"menu-button",onClick:function(){return H.apply(this,arguments)}},"Delete account")))):o.a.createElement("div",null,"Loading..",o.a.createElement(ke.a,null))}));n(599);var ct=function(e){var t=Object(r.useState)(),n=Object(j.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(),i=Object(j.a)(s,2),u=i[0],l=i[1];return o.a.createElement("div",null,o.a.createElement(Xe.a,{open:e.isOpen,onClose:e.handleClose,"aria-labelledby":"form-dialog-title"},o.a.createElement(tt.a,{id:"form-dialog-title"},"Create A New Course"),o.a.createElement(_e.a,null,o.a.createElement(et.a,null,"Create a new course. Start by entering a title and description below!"),o.a.createElement(W.a,{autoFocus:!0,margin:"dense",id:"title",label:"Course Title",onChange:function(e){l(e.target.value)},type:"text",fullWidth:!0}),o.a.createElement(W.a,{autoFocus:!0,margin:"dense",id:"description",label:"Course Description",onChange:function(e){c(e.target.value)},type:"text",fullWidth:!0})),o.a.createElement(Qe.a,null,o.a.createElement(C.a,{onClick:e.handleClose,color:"secondary"},"Cancel"),o.a.createElement(C.a,{onClick:function(){var t={title:u,description:a};e.handleSubmit(t)},color:"secondary"},"Submit"))))};function st(e){return o.a.createElement("div",{className:"courses-section"},o.a.createElement("h1",null," Courses You've Created "),o.a.createElement(Ge,{courses:e.createdCourses,includeEditIcon:!0}))}var it=function(e){var t=Object(r.useState)(!1),n=Object(j.a)(t,2),a=n[0],c=n[1],s=Object(y.f)();function i(){return(i=Object(l.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.owner=e.user.id,a={id:0,lessons:"Course/rlfxOavBn4nPZLNTRMkL/Lessons/kL5CwNARpoUhexocK7P4",sectionTitle:"".concat(n.title," - Section")},n.chapters=[],n.chapter=a,t.next=6,me(e.user,n);case 6:return t.sent,c(!1),t.next=10,e.updateCourses();case 10:return t.next=12,e.updateUser(e.user.id);case 12:s.push("/editCourse/".concat(e.user.createdCoursesRefs[e.user.createdCoursesRefs.length-1].id));case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var d=null;return d=e.user&&e.user.createdCourses&&e.user.createdCourses.length>0?o.a.createElement(st,{createdCourses:e.user.createdCourses}):o.a.createElement("h3",null,"You have not created any courses"),o.a.createElement("div",{className:"Home"},o.a.createElement(De.a,null),o.a.createElement(L.a,{className:"center",variant:"h3",component:"h3"},"Create A Course"),o.a.createElement(Pe.a,{className:"userProfile-bottom-padding",maxWidth:"lg"},o.a.createElement(je.a,{className:"paper"},d,o.a.createElement("span",null,o.a.createElement(C.a,{variant:"contained",color:"secondary",onClick:function(){c(!0)}},"Create New Course")))),o.a.createElement(qe.a,null),o.a.createElement(ct,{isOpen:a,handleClose:function(){c(!1)},handleSubmit:function(e){return i.apply(this,arguments)},user:e.user}))};n(600);var ut=function(e){return o.a.createElement("div",null,o.a.createElement("h3",null,e.lesson.title),o.a.createElement("h6",null,"Link: ",e.lesson.video),o.a.createElement("strong",null,"Description: "),o.a.createElement("p",null,e.lesson.description))};var lt=function(e){return o.a.createElement(je.a,{className:"paper"},e.activeChapter?o.a.createElement("div",null,o.a.createElement("h2",null,"Chapter: ",e.activeChapter.title),o.a.createElement(ut,{lesson:e.activeLesson})):o.a.createElement("div",null,o.a.createElement("p",null,"course overview"),o.a.createElement(C.a,{onClick:e.openEditCourseOverviewDialog,color:"secondary",variant:"contained"},"Edit Overview")))};var dt=function(e){var t=Object(r.useState)(),n=Object(j.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(),i=Object(j.a)(s,2),u=i[0],l=i[1];return o.a.createElement("div",null,o.a.createElement(Xe.a,{open:e.isOpen,onClose:e.handleClose,"aria-labelledby":"form-dialog-title"},o.a.createElement(tt.a,{id:"form-dialog-title"},"Create New Chapter"),o.a.createElement(_e.a,null,o.a.createElement(et.a,null,"Create a new chapter within your course. Enter a title and description below."),o.a.createElement(W.a,{autoFocus:!0,margin:"dense",id:"title",label:"Chapter Title",onChange:function(e){l(e.target.value)},type:"text",fullWidth:!0}),o.a.createElement(W.a,{autoFocus:!0,margin:"dense",id:"description",label:"Chapter Description",onChange:function(e){c(e.target.value)},type:"text",fullWidth:!0})),o.a.createElement(Qe.a,null,o.a.createElement(C.a,{onClick:e.handleClose,color:"secondary"},"Cancel"),o.a.createElement(C.a,{onClick:function(t){var n={title:u,description:a};e.handleSubmit(n)},color:"secondary"},"Submit"))))};var pt=function(e){var t=Object(r.useState)(),n=Object(j.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(),i=Object(j.a)(s,2),u=i[0],l=i[1],d=Object(r.useState)(),p=Object(j.a)(d,2),m=p[0],f=p[1];return o.a.createElement("div",null,o.a.createElement(Xe.a,{open:e.isOpen,onClose:e.handleClose,"aria-labelledby":"form-dialog-title"},o.a.createElement(tt.a,{id:"form-dialog-title"},"Create New Lesson"),o.a.createElement(_e.a,null,o.a.createElement(et.a,null,"Add a new lesson to your course"),o.a.createElement(W.a,{autoFocus:!0,margin:"dense",id:"title",label:"Lesson Title",onChange:function(e){l(e.target.value)},type:"text",fullWidth:!0}),o.a.createElement(W.a,{autoFocus:!0,margin:"dense",id:"description",label:"Lesson Description",onChange:function(e){c(e.target.value)},type:"text",fullWidth:!0}),o.a.createElement(W.a,{autoFocus:!0,margin:"dense",id:"video",label:"Video URL",onChange:function(e){f(e.target.value)},type:"text",fullWidth:!0})),o.a.createElement(Qe.a,null,o.a.createElement(C.a,{onClick:e.handleClose,color:"secondary"},"Cancel"),o.a.createElement(C.a,{onClick:function(t){var n={title:u,description:a,video:m};e.addNewLesson(n)},color:"secondary"},"Submit"))))},mt=n(107);n(694);var ft=function(e){var t=Object(r.useState)(),n=Object(j.a)(t,2),a=(n[0],n[1],Object(r.useState)(e.course.overview)),c=Object(j.a)(a,2),s=c[0],i=c[1],u=Object(r.useState)(),l=Object(j.a)(u,2),d=l[0],p=l[1];return Object(r.useEffect)((function(){if(s){var e=JSON.parse(s);p(mt.EditorState.createWithContent(Object(mt.convertFromRaw)(e)))}else p(mt.EditorState.createEmpty())}),[]),o.a.createElement("div",null,o.a.createElement(Xe.a,{open:e.isOpen,onClose:e.handleClose,"aria-labelledby":"form-dialog-title"},o.a.createElement(tt.a,{id:"form-dialog-title"},"Edit Course Overview"),o.a.createElement(_e.a,null,o.a.createElement(et.a,null,"Edit course information, providing students with a basic description of the class and learning objectives."),o.a.createElement(mt.Editor,{editorState:d,onEditorStateChange:function(e){p(e)}})),o.a.createElement(Qe.a,null,o.a.createElement(C.a,{onClick:e.handleClose,color:"secondary"},"Cancel"),o.a.createElement(C.a,{onClick:function(t){var n=d.getCurrentContent();i(Object(mt.convertToRaw)(n)),e.updateCourseOverview(n)},color:"secondary"},"Submit"))))};var ht=Object(y.h)((function(e){var t=Object(y.g)().id,n=Object(r.useState)(),a=Object(j.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(),d=Object(j.a)(i,2),p=(d[0],d[1],Object(r.useState)(!1)),m=Object(j.a)(p,2),f=m[0],h=m[1],v=Object(r.useState)(!1),b=Object(j.a)(v,2),E=b[0],g=b[1],O=Object(r.useState)(!1),k=Object(j.a)(O,2),w=k[0],x=k[1],S=Object(r.useState)(),N=Object(j.a)(S,2),U=N[0],F=N[1],L=Object(r.useState)(),R=Object(j.a)(L,2),I=R[0],A=R[1];function H(){return(H=Object(l.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!1),e.next=3,Ee(c,U,n);case 3:M(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(l.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!1),console.log(n),e.next=4,be(c,n);case 4:M(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(l.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce(c,n);case 2:M(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return D.apply(this,arguments)}function D(){return(D=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((null===(n=t.lessonsRef)||void 0===n?void 0:n.length)>0)){e.next=5;break}return e.abrupt("return",Promise.all(t.lessonsRef.map(function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){return t.lessons=e,t})));case 5:return e.abrupt("return",Promise.resolve(t));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return W.apply(this,arguments)}function W(){return(W=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map((function(e){return z(e)}))));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return G.apply(this,arguments)}function G(){return(G=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge(t);case 2:return n=e.sent,e.next=5,P(n.chapters);case 5:n.chapters=e.sent,s(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){t&&M(t)}),[t]),c?o.a.createElement("div",{className:"edit-course"},o.a.createElement(T.a,{container:!0,spacing:3},o.a.createElement(T.a,{item:!0,xs:4},o.a.createElement(Be,{editable:!0,activeLesson:I,setActiveLesson:A,openLessonModal:function(){g(!0)},setChapterInContext:F,course:c,openCreateChapterDialog:function(){h(!0)}})),o.a.createElement(T.a,{item:!0,xs:8},o.a.createElement(lt,{activeChapter:U,activeLesson:I,course:c,openEditCourseOverviewDialog:function(){x(!0)}})),o.a.createElement(C.a,{variant:"contained",color:"secondary",onClick:function(){A(void 0),F(void 0),e.history.push("/courseOverview/".concat(c.id))}},"View Publised Course")),o.a.createElement(dt,{isOpen:f,handleSubmit:function(e){return V.apply(this,arguments)},handleClose:function(){h(!1)}}),o.a.createElement(pt,{isOpen:E,addNewLesson:function(e){return H.apply(this,arguments)},handleClose:function(){g(!1)}}),o.a.createElement(ft,{isOpen:w,updateCourseOverview:function(e){return B.apply(this,arguments)},handleClose:function(){x(!1)},course:c})):o.a.createElement("div",null,"Loading...",o.a.createElement(ke.a,null))})),vt=n(296),bt=n(762),Ct=Object(vt.a)({palette:{primary:{light:"#f44336",main:"#f6eee7",dark:"#dbbca1"},secondary:{light:"#a17da5",main:"#87618c",dark:"#442b4a"}},typography:{useNextVariants:!0},overrides:{MuiButton:{root:{textTransform:"none"}}}}),Et=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).state={courses:[],users:[],currentUser:void 0},e.fetchCourses=e.fetchCourses.bind(Object(m.a)(e)),e.fetchUsers=e.fetchUsers.bind(Object(m.a)(e)),e.render=e.render.bind(Object(m.a)(e)),e.updateUser=e.updateUser.bind(Object(m.a)(e)),e.setUser=e.setUser.bind(Object(m.a)(e)),e.getUserOnLoad=e.getUserOnLoad.bind(Object(m.a)(e)),e.fetchCourses().then((function(){e.getUserOnLoad()})),e}return Object(p.a)(n,[{key:"updateUser",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return this.setState({currentUser:void 0}),e.abrupt("return");case 3:return e.next=5,ae(t).then((function(e){var t=e.data();if(t.createdCoursesRefs&&t.createdCoursesRefs.length>0){t.createdCoursesRefs.map((function(e){return n.state.courses.find((function(t){return t.id===e.id}))}));t.createdCourses=t.createdCoursesRefs.map((function(e){return n.state.courses.find((function(t){return t.id===e.id}))}))}t.pastCoursesRefs&&t.pastCoursesRefs.length>0&&(t.pastCourses=t.pastCoursesRefs.map((function(e){return n.state.courses.find((function(t){return t.id===e.id}))}))),t.favoritedCoursesRefs&&t.favoritedCoursesRefs.length>0&&(t.favoritedCourses=t.favoritedCoursesRefs.map((function(e){return n.state.courses.find((function(t){return t.id===e.id}))}))),n.setState({currentUser:t})}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserOnLoad",value:function(){var e=ue();if(e)this.updateUser(e.uid);else if(document.cookie.split(";").some((function(e){return e.trim().startsWith("userid=")}))){var t=document.cookie.replace(/(?:(?:^|.*;\s*)userid\s*\=\s*([^;]*).*$)|^.*$/,"$1");this.updateUser(t)}else this.updateUser(void 0)}},{key:"setUser",value:function(e){console.log("login",e),this.updateUser(e.id),document.cookie="userid=".concat(e.id)}},{key:"fetchCourses",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,oe().then((function(e){e.forEach((function(e){var a=e.data(),r=e.id;a.owner.get().then((function(e){a.owner=e.data()})),a.id=r,t.push(a),n.setState({courses:t})}))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchUsers",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,ce().then((function(e){e.forEach((function(e){var a=e.data();a.id=e.id,t.push(a),n.setState({users:t})}))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e;return this.state.currentUser&&console.log("logged in!"),o.a.createElement(bt.a,{theme:Ct},o.a.createElement(g.a,null,o.a.createElement("div",null,o.a.createElement("nav",{hidden:!this.state.currentUser},o.a.createElement(v.a,{position:"static"},o.a.createElement(b.a,null,o.a.createElement(C.a,{variant:"contained",color:"secondary",className:"menu-button main",component:g.b,to:"/myCourses"},"My Courses"),o.a.createElement(C.a,{variant:"contained",color:"secondary",className:"menu-button main",component:g.b,to:"/courseLibrary"},"All Courses"),o.a.createElement(C.a,{variant:"outlined",color:"secondary",className:"menu-button align-left",component:g.b,to:"/createCourse"},"Create a Course"),o.a.createElement(E.a,{className:"menu-button profile-icon",component:g.b,to:"/profile",color:"inherit","aria-label":"menu"},o.a.createElement(k.a,null)),o.a.createElement("span",null,null===(e=this.props.user)||void 0===e?void 0:e.name)))),o.a.createElement(y.c,null,o.a.createElement(y.a,{exact:!0,path:"/"},o.a.createElement(Te,{completeLogin:this.setUser})),o.a.createElement(y.a,{path:"/courseLibrary"},o.a.createElement(Oe,{courses:this.state.courses,user:this.state.currentUser,updateUser:this.updateUser})),o.a.createElement(y.a,{path:"/courseOverview/:id"},o.a.createElement(Ve,{service:a})),o.a.createElement(y.a,{path:"/myCourses"},o.a.createElement(Ze,{user:this.state.currentUser})),o.a.createElement(y.a,{path:"/profile"},o.a.createElement(ot,{user:this.state.currentUser,updateUser:this.updateUser})),o.a.createElement(y.a,{path:"/createCourse"},o.a.createElement(it,{user:this.state.currentUser,updateUser:this.updateUser,updateCourses:this.fetchCourses})),o.a.createElement(y.a,{path:"/editCourse/:id"},o.a.createElement(ht,{user:this.state.currentUser}))))))}}]),n}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(Et,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[313,1,2]]]);
//# sourceMappingURL=main.8f8e2589.chunk.js.map