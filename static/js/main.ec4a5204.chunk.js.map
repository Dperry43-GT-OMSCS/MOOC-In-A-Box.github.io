{"version":3,"sources":["components/CourseCard/CourseCard.js","components/CourseLibrary/CourseLibraryToolbar/SearchBar/SearchBar.component.js","components/CourseLibrary/CourseLibraryToolbar/CourseLibraryToolbarMenu/CourseLibraryToolbarMenuItem/CourseLibraryToolbarMenuItem.component.js","components/CourseLibrary/CourseLibraryToolbar/CourseLibraryToolbarMenu/CourseLibraryToolbarMenu.component.js","components/CourseLibrary/CourseLibraryToolbar/CourseLibraryToolbar.component.js","service/firebase.service.js","components/CourseLibrary/CourseLibrary.js","components/Login/Login.js","components/CoursesDropdown/CoursesDropdown.component.js","components/MyCourses/MyCourses.js","components/UserProfile/EditDialog/EditDialog.component.js","components/UserProfile/UserProfileSection/UserProfileSection.component.js","components/UserProfile/UserProfile.js","components/CreateCourse/CreateCourseDialog/CreateCourseDialog.component.js","components/CreateCourse/CreateCourse.component.js","components/CourseOverview/CourseNavigationPane/CourseChapterPanel/CourseChapterPanel.component.js","components/CourseOverview/CourseNavigationPane/CourseNavigationPane.component.js","components/CourseOverview/CourseOverviewPane/CourseLesson/CourseLesson.component.js","components/CourseOverview/CourseOverviewPane/CourseOverviewPane.component.js","components/CourseOverview/Dialogs/CreateChapterDialog/CreateChapterDialog.component.js","components/CourseOverview/Dialogs/CreateLessonDialog/CreateLessonDialog.component.js","components/CourseOverview/Dialogs/DeleteDialog/DeleteDialog.component.js","components/CourseOverview/CourseOverview.component.js","App.js","serviceWorker.js","index.js"],"names":["useStyles","makeStyles","theme","root","maxWidth","minWidth","maxHeight","minHeight","position","media","paddingTop","height","marginLeft","marginRight","expand","transform","transition","transitions","create","duration","shortest","expandOpen","avatar","backgroundColor","red","actionsRow","bottom","left","content","paddingBottom","CourseCard","props","classes","React","useState","isFavorited","setIsFavorited","isCourseAFavorite","Card","variant","className","CardHeader","title","course","subheader","owner","displayName","action","IconButton","aria-label","onClick","removeFavoriteClicked","favoriteClicked","CardMedia","image","thumbnailUrl","CardContent","Typography","color","component","description","CardActions","disableSpacing","Button","Link","to","id","SearchBar","TextField","value","searchValue","onChange","type","onSearchClicked","CourseLibraryToolbarMenuItem","FormControlLabel","control","Radio","label","CourseLibraryToolbarMenu","menuItems","options","map","option","handleClick","associatedClickFunction","display","Menu","menuId","anchorEl","element","keepMounted","open","Boolean","onClose","closeFunction","MenuItem","FormControl","FormLabel","menuLabel","RadioGroup","name","radioGroupName","menuValue","event","target","CourseLibraryToolbar","menuButtons","menuItem","clickedFunction","buttonText","menus","menuOptions","AppBar","Toolbar","searchInfo","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","db","firestore","storageRef","storage","ref","getUserById","userId","collection","doc","get","getAllUsers","updateUser","updates","a","set","merge","createUser","userAuth","uid","photoURL","email","getCurrentUser","user","auth","currentUser","deleteUser","delete","then","document","cookie","catch","error","console","log","getCourseById","courseId","courseResult","exists","data","addImage","imageFile","child","put","getImageUrl","getDownloadURL","createCourse","courseInfo","userDocRef","newCourseObj","chapters","overview","JSON","stringify","add","courseDoc","usersCreatedCourses","createdCoursesRefs","length","courseRef","push","thumbnailFile","imageRef","imageUrl","courseUpdate","updateCourse","courseDocWithImage","updateObject","favoriteCourse","favoritedCourses","favoritedCoursesRefs","removeFavoriteCourse","filter","item","deleteCourseInFirebase","courseDeletedResult","queryResults","updateUsersPromises","forEach","createdCoursesRefLength","favoritedCourseRefs","Promise","all","deleteAllChapters","arrayOfLessonPromises","deleteLessons","chapter","lessonsRef","deleteCourse","addNewChapter","newChapterInfo","updateLesson","chapterInfo","lessonInfo","lessonDoc","lessonRef","deleteLesson","lesson","courseChapters","chapterInside","lessonsRefs","lessons","lessonInside","result","logUserInUser","isGoog","provider","GoogleAuthProvider","FacebookAuthProvider","users","undefined","authUser","signInWithPopup","u","signOut","getDocFromDocRef","docRef","myResult","CourseLibrary","sortByClicked","setState","sortByElement","currentTarget","sortByHandleClose","sortFilterValue","topicClicked","topicElement","topicHandleClose","topicFilterValue","organizationClicked","organizationElement","organizationHandleClosed","organizationFilterValue","buildMenuItems","state","find","favoritedCourse","handleSearchChange","bind","handleSearchClicked","activeCourses","courses","routeClicked","e","searchValueLowerCase","toLowerCase","this","includes","FirebaseService","listItems","Grid","s","class","container","spacing","Component","LoginPage","redirectToReferrer","loginGoogle","loginFacebook","completeLogin","history","loadingUser","CircularProgress","from","location","pathname","withRouter","CoursesDropdownComponent","ExpansionPanel","ExpansionPanelSummary","expandIcon","aria-controls","ExpansionPanelDetails","xs","md","List","dense","ListItem","RouterLink","includeEditIcon","CurrentCoursesComponent","currentCourses","PastCoursesComponent","pastCourses","SavedCoursesComponent","savedCourses","CreatedCoursesComponent","createdCourses","MyCourses","setUser","useEffect","courseComponentList","hasCourses","pastCourse","CssBaseline","Container","Paper","EditDialog","Dialog","isOpen","handleClose","aria-labelledby","DialogTitle","field","DialogContent","DialogContentText","autoFocus","margin","fullWidth","DialogActions","handleSubmit","userKeyToDisplayMap","UserProfileSection","align","displayValue","isEditable","openDialog","isDialogOpen","displayKey","setDisplayName","oldDisplayName","setOldDiplayName","isDisplayNameDialogOpen","setIsDisplayNameDialogOpen","userInterests","setUserInterests","oldUserInterests","setOldUserInterests","isUserInterestsDialogOpen","setIsUserInterestsDialogOpen","res","interests","err","Divider","CreateCourseDialog","setDescription","setTitle","editorState","setEditorState","setOverview","isTitleError","setIsTitleError","isDescriptionError","setIsDescriptionError","setThumbnailFile","EditorState","createWithContent","convertFromRaw","parse","createEmpty","required","helperText","editorClassName","handleKeyCommand","command","newState","RichUtils","convertToRaw","getCurrentContent","onEditorStateChange","Input","file","files","titleIsGood","descriptionIsGood","currentContentState","courseDetails","CreateCourse","isCreateCourseDialogOpen","setIsCreateCourseDialogOpen","useHistory","updateCourses","currnetCoursesSection","CourseChapterPanel","addNewLessonButton","lessonItems","isActiveLesson","activeLesson","selected","setChapterInContext","setActiveLesson","listItemClicked","button","ListItemText","primary","editable","openLessonModal","defaultExpanded","chapterInContext","CourseNavigationPane","addNewChapterButton","deleteCourseButton","courseNavigationPanels","openCreateChapterDialog","openDeleteDialog","size","YoutubeComponentConfig","opts","width","playerVars","autoplay","videoId","EditCourseLesson","hasYoutubeVideo","goToPreviousLesson","navigateToPreviousLesson","goToNextLesson","navigateToNextLesson","str","isJson","contentStateObj","toolbarHidden","readOnly","text","ContentState","createFromText","youtubeConfig","url","video","myParamters","split","searchParams","URLSearchParams","getVideoConfig","onReady","pauseVideo","isFirstLesson","isLastLesson","nextLesson","nextChapter","leftButton","endIcon","prevLesson","prevChapter","rightButton","startIcon","getButtonDiv","CourseOverviewPane","openEditCourseOverviewDialogButton","lessonArray","i","j","openEditCourseOverviewDialog","currentLessonIndex","indexOf","currentLessonIndexInChapter","activeChapter","numLessonsInChapter","numChapters","activeChapterIndex","getLessonInformation","indexOfCurrentLesson","CreateChapterDialog","CreateLessonDialog","setVideo","isYoutubeError","setIsYoutubeError","wrapperClassName","descriptionJSON","tempVideo","DeleteDialog","aria-describedby","deleteType","dialogs","viewPublishedCourseButton","useParams","setCourse","isCreateChapterDialogOpen","setIsCreateChapterDialogOpen","isCreateLessonDialogOpen","setIsCreateLessonDialogOpen","isEditCourseOverviewDialogOpen","setIsEditCourseOverviewDialogOpen","isDeleteDialogOpen","setIsDeleteDialogOpen","addLesson","setAddLesson","setDeleteType","objToDelete","setObjToDelete","openCreateLessonDialog","setDeletingCourse","resolveLessons","results","resolve","resolveChapters","isDeletingCourse","updatedLesson","buttonTheme","createMuiTheme","palette","main","secondary","typography","useNextVariants","overrides","MuiButton","textTransform","light","dark","App","myCourseSelected","allCoursesSelected","fetchCourses","fetchUsers","render","getUserOnLoad","deletingCourse","pastCoursesRefs","some","trim","startsWith","cookieValue","replace","PrivateRoute","isLoggedIn","browserRouteChanged","hidden","exact","path","window","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.ec4a5204.chunk.js","sourcesContent":["import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Collapse from '@material-ui/core/Collapse';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport { red } from '@material-ui/core/colors';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport ShareIcon from '@material-ui/icons/Share';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport { Button } from '@material-ui/core';\nimport {Link} from 'react-router-dom'\nimport FavoriteBorderOutlinedIcon from '@material-ui/icons/FavoriteBorderOutlined';\n\n\n\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    maxWidth: 345,\n    minWidth: 345,\n    maxHeight: 400,\n    minHeight: 400,\n    position: 'relative',\n  },\n  media: {\n    paddingTop: '56.25%', // 16:9\n    maxWidth: '50%',\n    height: '40%',\n    marginLeft: \"auto\",\n    marginRight: \"auto\"\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n  avatar: {\n    backgroundColor: red[500],\n  },\n  actionsRow: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0\n  }, \n  content: {\n    paddingBottom: '1rem'\n  }\n}));\n\nexport default function CourseCard(props) {\n  const classes = useStyles();\n  const [expanded, setExpanded] = React.useState(false);\n  const [isFavorited, setIsFavorited] = React.useState(false)\n\n  if ( props.isCourseAFavorite != isFavorited){\n    setIsFavorited(props.isCourseAFavorite);\n  }\n\n\n  const handleExpandClick = () => {\n    setExpanded(!expanded);\n  };\n\n  const favoriteButtonClicked = () => {\n    if (isFavorited) {\n      setIsFavorited(false);\n      props.removeFavoriteClicked(props.course);\n    } else {\n      setIsFavorited(true);\n      props.favoriteClicked(props.course);\n    }\n   \n  }\n\n  return (\n    <Card variant=\"outlined\" className={classes.root}>\n      <CardHeader\n        title={props.course.title}\n        subheader={props.course.owner.displayName}\n        action={\n          <IconButton aria-label=\"add to favorites\" onClick={favoriteButtonClicked}>\n           { isFavorited ? <FavoriteIcon /> : <FavoriteBorderOutlinedIcon />  } \n          </IconButton>\n        }\n      />\n      <CardMedia\n        className={classes.media}\n        image={props.course.thumbnailUrl ? props.course.thumbnailUrl: \"/static/images/cards/paella.jpg\"}\n        title=\"Paella dish\"\n      />\n      <CardContent className={classes.content}>\n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n          {props.course.description}\n        </Typography> \n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n          {props.course.owner.displayName}\n        </Typography>\n      </CardContent>\n      <CardActions className={classes.actionsRow} disableSpacing>\n        <Button \n          variant=\"contained\" \n          color=\"secondary\"\n          component={Link}\n          to={`/courseOverview/${props.course.id}`}\n          >\n            Overview\n        </Button>\n      </CardActions>\n    </Card>\n  );\n}","import React from 'react';\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport { IconButton } from '@material-ui/core';\nimport TextField from '@material-ui/core/TextField';\n\nimport './SearchBar.css';\n\nfunction SearchBar(props) {\n  return (\n    <div className=\"search-bar\">\n      <TextField value={props.searchValue} onChange={props.onChange} id=\"outlined-search\" type=\"search\" variant=\"outlined\" color=\"secondary\" />\n      <IconButton className=\"menu-button\" onClick={props.onSearchClicked}>\n        <SearchIcon className=\"search-bar-icon\" />\n      </IconButton>\n    </div>\n  )\n}\n\nexport default SearchBar\n\n\n","import React from 'react';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Radio from '@material-ui/core/Radio';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\n\n\nfunction CourseLibraryToolbarMenuItem(props){\n    return (\n      <FormControlLabel value={props.value} control={<Radio />} label={props.value} />\n    )\n  }\n\n  export default CourseLibraryToolbarMenuItem","import React from 'react';\n\nimport Menu from '@material-ui/core/Menu';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport CourseLibraryToolbarMenuItem from './CourseLibraryToolbarMenuItem/CourseLibraryToolbarMenuItem.component';\n\n\n\nfunction CourseLibraryToolbarMenu(props){\n\n  let menuItems = props.options.map( option => {\n    return (\n      <CourseLibraryToolbarMenuItem\n        handleClick={option.associatedClickFunction}\n        value={option.display}>\n      </CourseLibraryToolbarMenuItem>\n    )\n  })\n\n  const onChangeFunction = (event) => {\n    props.closeFunction(event.target.value)\n  }\n\n    return (\n      <Menu\n          id={props.menuId}\n          anchorEl={props.element}\n          keepMounted\n          open={Boolean(props.element)}\n          onClose={props.closeFunction}\n        >\n          <MenuItem>\n            <FormControl component=\"fieldset\">\n            <FormLabel component=\"legend\">{props.menuLabel}</FormLabel>\n            <RadioGroup aria-label=\"gender\" name={props.radioGroupName} value={props.menuValue} onChange={onChangeFunction}>\n              {menuItems}\n            </RadioGroup>\n            </FormControl>\n          </MenuItem>\n      </Menu>\n    )\n  }\n\n  export default CourseLibraryToolbarMenu","import React from 'react';\n\nimport {AppBar, Toolbar, IconButton, Typography } from '@material-ui/core';\nimport {Button} from '@material-ui/core';\n\nimport SearchBar from './SearchBar/SearchBar.component';\nimport CourseLibraryToolbarMenu from './CourseLibraryToolbarMenu/CourseLibraryToolbarMenu.component'\n\n\n//<CourseLibraryMenu handleClose={this.handleClose} sortByElement={props.state.sortByElement}></CourseLibraryMenu>\n\n\nfunction CourseLibraryToolbar(props){\n\n    let menuButtons = props.menuItems.map(menuItem => {\n        return (\n            <Button\n                color=\"inherit\" \n                className=\"menu-button\"\n                onClick={menuItem.clickedFunction}\n            >\n                {menuItem.buttonText}\n            </Button>\n        )\n    })\n\n    let menus = props.menuItems.map(menuItem => {\n        return(\n            <CourseLibraryToolbarMenu\n                element={menuItem.element}\n                closeFunction = {menuItem.closeFunction}\n                options={menuItem.menuOptions}\n                menuId={menuItem.menuId}\n                menuLabel={menuItem.buttonText}\n            >\n            </CourseLibraryToolbarMenu>\n        )\n    })\n\n    return(\n        <AppBar position=\"static\" className=\"course-library-app-bar\">\n            <Toolbar>\n                {menuButtons}\n                <SearchBar searchValue={props.searchInfo.value} onChange={props.searchInfo.onChange} onSearchClicked={props.searchInfo.onClick}></SearchBar>\n            </Toolbar>\n            {menus}\n      </AppBar>\n    )\n}\n\nexport default CourseLibraryToolbar","import firebase from 'firebase'\n\n\n/**\n * Firebase Set Up\n */\nvar firebaseConfig = {\n    apiKey: \"AIzaSyA8tAHYGUiNkFHq6452W4Qr79eibVmtRZA\",\n    authDomain: \"mooc-in-a-box.firebaseapp.com\",\n    databaseURL: \"https://mooc-in-a-box.firebaseio.com\",\n    projectId: \"mooc-in-a-box\",\n    storageBucket: \"mooc-in-a-box.appspot.com\",\n    messagingSenderId: \"594314585164\",\n    appId: \"1:594314585164:web:3ae152452d1c238af100e9\",\n    measurementId: \"G-LXH34JCXZS\"\n};\n\nfirebase.initializeApp(firebaseConfig);\nconst db = firebase.firestore();\nvar storageRef = firebase.storage().ref();\n\n\n\n/*\n* -----------------------------------------------------------\n*  USER Functions\n* -----------------------------------------------------------\n*/\n\nexport const getUserById = userId => {\n    return db.collection('Users').doc(userId).get();\n}\n\nexport const getAllUsers = () => {\n    return db.collection('Users').get();\n}\n\nexport const updateUser = async (userId, updates) => {\n    return db.collection('Users')\n        .doc(userId)\n        .set(updates, { merge: true })\n}\n\nexport const createUser = async (userAuth) => {\n    return db.collection('Users')\n        .doc(userAuth.uid)\n        .set({\n            id: userAuth.uid,\n            name: userAuth.displayName,\n            photoURL: userAuth.photoURL,\n            email: userAuth.email,\n        },\n            { merge: true }\n        )\n}\n\nexport const getCurrentUser = () => {\n    var user = firebase.auth().currentUser;\n    if (user) {\n        return user;\n    } else {\n        return undefined;\n    }\n}\n\nexport const deleteUser = async () => {\n    var user = firebase.auth().currentUser;\n\n    return await user.delete().then(function () {\n        document.cookie = 'userid=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';\n        return true;\n    }).catch(function (error) {\n        console.log(error);\n        return false;\n    });\n}\n\n\n\n/*\n* -----------------------------------------------------------\n*  Course Functions\n* -----------------------------------------------------------\n*/\n\nexport const getCourseById = courseId => {\n    return db.collection('Course')\n        .doc(courseId)\n        .get()\n        .then(async courseResult => {\n            if (courseResult.exists) {\n                const course = courseResult.data();\n                course.id = courseId;\n                return course;\n            } else {\n                return null\n            }\n        });\n};\n\nexport const getAllCourses = () => {\n    return db.collection('Course').get();\n}\n\n\nexport const addImage = (courseId, imageFile) => {\n    const courseImageRef = storageRef.child(`images/courses/${courseId}/${imageFile.name}`);\n    return courseImageRef.put(imageFile);\n}\n\nexport const getImageUrl = (courseId, imageFile) => {\n    const courseImageRef = storageRef.child(`images$s/${courseId}/${imageFile.name}`);\n    return courseImageRef.getDownloadURL();\n\n}\n\nexport const createCourse = async (user, courseInfo) => {\n    const userDocRef = db.doc(`Users/${user.id}`)\n\n    const newCourseObj = {\n        owner: userDocRef,\n        title: courseInfo.title,\n        description: courseInfo.description,\n        chapters: courseInfo.chapters\n    }\n\n    if (courseInfo.overview) {\n        newCourseObj.overview = JSON.stringify(courseInfo.overview)\n    }\n\n    // Create Course\n    return await db.collection('Course').add(newCourseObj)\n        .then(async courseDoc => {\n\n            let usersCreatedCourses;\n            if (user.createdCoursesRefs && user.createdCoursesRefs.length > 0) {\n                usersCreatedCourses = user.createdCoursesRefs;\n            } else {\n                usersCreatedCourses = []\n            }\n            const courseRef = db.doc(`Course/${courseDoc.id}`)\n            usersCreatedCourses.push(courseRef);\n\n\n            // Check If Image Was Included\n            if(courseInfo.thumbnailFile){\n                // Upload Image\n                return await addImage(courseDoc.id, courseInfo.thumbnailFile)\n                    .then( async imageRef => {\n\n                       return await getImageUrl(courseDoc.id, courseInfo.thumbnailFile)\n                        .then( async imageUrl => {\n                            const courseUpdate = {\n                                thumbnailUrl: imageUrl\n                            };\n\n                            return await updateCourse(courseDoc.id, courseUpdate )\n                                .then( async courseDocWithImage => {                                                                \n                                    const updateObject = {\n                                        createdCoursesRefs: usersCreatedCourses\n                                    }\n\n                                return await updateUser(user.id, updateObject);\n                            })\n                        })\n                    });\n            } else {\n                // No Image\n                const updateObject = {\n                    createdCoursesRefs: usersCreatedCourses\n                }\n                return await updateUser(user.id, updateObject);\n            }\n        })\n}\n\nexport const favoriteCourse = async (user, courseInfo) => {\n    const courseRef = db.doc(`Course/${courseInfo.id}`)\n    let favoritedCourses;\n\n    if (user.favoritedCoursesRefs && user.favoritedCoursesRefs.length > 0) {\n        favoritedCourses = user.favoritedCoursesRefs;\n    } else {\n        favoritedCourses = []\n    }\n\n    favoritedCourses.push(courseRef);\n\n    const updateObject = {\n        favoritedCoursesRefs: favoritedCourses\n    }\n\n    return await updateUser(user.id, updateObject);\n}\n\nexport const removeFavoriteCourse = async (user, courseInfo) => {\n    const favoritedCourses = user.favoritedCoursesRefs.filter(item => item.id !== courseInfo.id);\n    const updateObject = {\n        favoritedCoursesRefs: favoritedCourses\n    }\n\n    return await updateUser(user.id, updateObject);\n}\n\n\nexport const updateCourse = async (courseId, updates) => {\n\n    if (updates.overview) {\n        updates.overview = JSON.stringify(updates.overview);\n    }\n\n    if( updates.thumbnailFile) {\n        return await addImage(courseId, updates.thumbnailFile)\n            .then( async imageRef => {\n\n           return await getImageUrl(courseId, updates.thumbnailFile)\n            .then( async imageUrl => {\n\n                delete updates.thumbnailFile;\n                updates.thumbnailUrl = imageUrl\n\n                return db.collection('Course')\n                .doc(courseId)\n                .set(updates, { merge: true });\n            })\n        })\n    } else{ \n        return db.collection('Course')\n            .doc(courseId)\n            .set(updates, { merge: true });\n    }\n}\n\n\nconst deleteCourseInFirebase = async (courseId) => {\n\n    return db.collection('Course').doc(courseId).delete().then( async courseDeletedResult => {\n        return await getAllUsers().then(async (queryResults) => {\n            const updateUsersPromises = []\n\n            queryResults.forEach((doc) => {\n                let updateUser = false;\n                const user = doc.data();\n                user.id = doc.id;\n                // const createdCoursesRefLength =  user.createdCoursesRefs?.length();\n                // const favoritedCourseRefs = user.favoritedCoursesRefs?.length();\n                \n                if(user.createdCoursesRefs && user.createdCoursesRefs.length > 0) {\n                    const createdCoursesRefLength =  user.createdCoursesRefs.length;\n                    user.createdCoursesRefs = user.createdCoursesRefs.filter( courseRef => courseRef.id !== courseId );\n                    if (user.createdCoursesRefs.length !== createdCoursesRefLength){\n                        updateUser = true;\n                    }\n                }\n\n                if(user.favoritedCourseRefs && user.favoritedCourseRefs.length > 0){\n                    const favoritedCourseRefs = user.favoritedCoursesRefs.length;\n                    user.favoritedCourseRefs = user.favoritedCoursesRefs.filter( courseRef => courseRef.id !== courseId);\n                    if (user.favoritedCourseRefs.length !== favoritedCourseRefs) {\n                        updateUser = true;\n                    }\n                }\n        \n                if (updateUser){\n                    updateUsersPromises.push( db.collection('Users').doc(user.id).set(user, { merge: true }) );\n                }\n            })\n\n            return await Promise.all(updateUsersPromises);\n        })\n    });\n}\n\n\nconst deleteAllChapters= async (course) => {\n    console.log(\"Calling in here\");\n    const arrayOfLessonPromises = [];\n    let deleteLessons = false;\n    for (const chapter of course.chapters) {\n        if (chapter.lessonsRef?.length > 0){\n            deleteLessons = true;\n            break;\n        }\n    }\n    if (deleteLessons){\n        console.log(\"IN HERE\");\n        // var batch = firebase.firestore().batch()\n\n        db.collection(`/Course/${course.id}/Lessons`).get()\n            .then(queryResults => {\n                // values.map(val => {\n                //     batch.delete(val)\n                // })\n\n\n                console.log(queryResults);\n                queryResults.forEach( doc => {\n                    console.log(doc.data());\n                    arrayOfLessonPromises.push(\n                        db.collection(`/Course/${course.id}/Lessons/`).doc(doc.id).delete()\n                    )\n                })\n            })\n        \n            return await Promise.all(arrayOfLessonPromises);\n        }\n}\n\n// const deleteChapter = async (course, chapter) => {\n//     db.collection(`/Course/${course.id}/`)\n// }\n\n\n\nexport const deleteCourse = async (course) => {\n    console.log(\" ======= DELETE COURSE =============\")\n    console.log(course);\n    console.log(course.id);\n    console.log(course.owner);\n    console.log(\" ====== END DELETE\");\n\n    if (course.chapters?.length > 0 ){\n        await deleteAllChapters(course)\n    }\n    return await deleteCourseInFirebase(course.id);\n}\n\n\n/*\n* !!!!!!!!\n* Course Attributes Section\n* !!!!!!!!\n*/\nexport const updateCourseOverview = async (course, content) => {\n    const contentJSON = JSON.stringify(content);\n\n    const updateObject = {\n        overview: contentJSON\n    }\n\n    return await updateCourse(course.id, updateObject);\n}\n\nexport const addNewChapter = async (course, newChapterInfo) => {\n    const chapter = {}\n    chapter.title = newChapterInfo.title;\n    chapter.description = newChapterInfo.description;\n    chapter.id = 0\n    chapter.lessonsRef = [];\n\n    if (course.chapters && course.chapters.length > 0) {\n        chapter.id = course.chapters.length;\n        course.chapters.push(chapter);\n    } else {\n        course.chapters = [];\n        course.chapters.push(chapter);\n    }\n\n    const updateObject = {\n        chapters: course.chapters\n    }\n\n    return await updateCourse(course.id, updateObject);\n\n}\n\nexport const updateLesson = async (course, chapterInfo, lessonInfo, add) => {\n    if (add) { // For initial lesson creation.\n        delete lessonInfo.id; // cuz undefined is not allowed\n        return await db.collection('Course').doc(course.id).collection('Lessons').add(lessonInfo)\n            .then(async lessonDoc => {\n                const lessonRef = db.doc(`Course/${course.id}/Lessons/${lessonDoc.id}`);\n                const chapters = course.chapters.map(chapter => {\n                    if (chapter === chapterInfo) {\n                        chapter.lessonsRef.push(lessonRef);\n                    }\n                    return chapter\n                });\n\n                const updateObject = {\n                    chapters\n                }\n                return await updateCourse(course.id, updateObject)\n            });\n    } else {\n        const lessonRef = db.doc(`Course/${course.id}/Lessons/${lessonInfo.id}`);\n        return await lessonRef.set(lessonInfo, { merge: true });\n    }\n}\n\nexport const deleteLesson = async (course, chapter, lesson) => {\n    console.log(course);\n    console.log(lesson);\n    console.log(chapter);\n    const courseChapters = course.chapters.map( chapterInside => {\n        if (chapterInside.title === chapter.title ) {\n            const lessonsRefs = [];\n            chapterInside.lessonsRef.forEach( lessonRef => {\n                if (lessonRef.id !== lesson.id){\n                    lessonsRefs.push(lesson);\n                }\n            })\n            chapterInside.lessonsRef = lessonsRefs;\n\n            const lessons = []\n            chapterInside.lessons.forEach( lessonInside => {\n                if (lessonInside.id !== lesson.id){\n                    lessons.push(lesson);\n                }\n            })\n            chapterInside.lessons = lessons;\n        }\n        return chapterInside;\n    });\n\n\n    return await db.collection(`/Course/${course.id}/Lessons`).doc(lesson.id).delete().then(async result => {\n        return await updateCourse(course.id, {\n            chapters: courseChapters\n        });\n    });\n  \n}\n\n\n/*\n* -----------------------------------------------------------\n*  Login Functions\n* -----------------------------------------------------------\n*/\n\nexport const logUserInUser = async (isGoog) => {\n    let provider;\n    isGoog ? provider = new firebase.auth.GoogleAuthProvider() :\n        provider = new firebase.auth.FacebookAuthProvider();\n    let users = [];\n    let currentUser = undefined;\n    let authUser = undefined;\n    // Get all users so we can see if the logged in one is one of ours.\n    // TODO(jessi): store this data so we don't need to fetch it, or directly ask for the user\n    // once they log in and if no user exists create one. Sounds like work.\n    await getAllUsers()\n        .then((queryResults) => {\n            queryResults.forEach((doc) => {\n                const user = doc.data();\n                user.id = doc.id;\n                users.push(user);\n            })\n        });\n\n    return await firebase.auth().signInWithPopup(provider).then(async function (result) {\n        authUser = result.user;\n        users.forEach(u => {\n            if (u.id === authUser.uid) {\n                currentUser = u;\n            }\n        });\n        // Didn't find an existing user.\n        if (currentUser === undefined) {\n            // Create new user\n            await createUser(authUser).then(async () => {\n                // Get the new user to return\n                return getCurrentUser();\n            }).catch(error => {\n                console.log(error);\n            });\n        }\n        return currentUser;\n    }).catch(function (error) {\n        console.log(error);\n    });\n}\n\nexport const signOut = async () => {\n    return await firebase.auth().signOut().then(function () {\n        document.cookie = 'userid=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';\n        return true;\n    }).catch(function (error) {\n        console.log(error);\n        return false;\n    });\n}\n\n\n\n/*\n* -----------------------------------------------------------\n*  Utility Functions\n* -----------------------------------------------------------\n*/\n\nexport const getDocFromDocRef = docRef => {\n    return docRef.get()\n        .then(result => {\n            if (result.exists) {\n                const myResult = result.data();\n                myResult.id = result.id;\n                return myResult;\n            } else {\n                return null;\n            }\n        })\n}","import React from 'react';\nimport './CourseLibrary.css';\nimport {Button} from '@material-ui/core';\nimport CourseCard from '../CourseCard/CourseCard';\nimport { render } from '@testing-library/react';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Grid from '@material-ui/core/Grid';\nimport {AppBar, Toolbar, IconButton, Typography } from '@material-ui/core';\nimport SearchBar from './CourseLibraryToolbar/SearchBar/SearchBar.component';\nimport CourseLibraryMenu from './CourseLibraryToolbar/CourseLibraryToolbarMenu/CourseLibraryToolbarMenu.component'\nimport CourseLibraryToolbar from './CourseLibraryToolbar/CourseLibraryToolbar.component'\n\nimport * as FirebaseService from '../../service/firebase.service';\n\n\nclass CourseLibrary extends React.Component {\n  constructor(props) {\n    super(props);\n    // Bind Search\n    this.handleSearchChange = this.handleSearchChange.bind(this);\n    this.handleSearchClicked = this.handleSearchClicked.bind(this);\n    // Bind Sort By\n    this.sortByClicked = this.sortByClicked.bind(this);\n    this.sortByHandleClose = this.sortByHandleClose.bind(this);\n    // Bind Topic\n    this.topicClicked = this.topicClicked.bind(this);\n    this.topicHandleClose = this.topicHandleClose.bind(this);\n    // Bind Organization\n    this.organizationClicked = this.organizationClicked.bind(this);\n    this.organizationHandleClosed = this.organizationHandleClosed.bind(this);\n\n    this.buildMenuItems = this.buildMenuItems.bind(this);\n    this.favoriteClicked = this.favoriteClicked.bind(this);\n    this.removeFavoriteClicked = this.removeFavoriteClicked.bind(this);\n    this.state = {\n      searchValue: \"\",\n      sortByElement: null,\n      topicElement: null,\n      organizationElement: null,\n      sortFilterValue: null,\n      topicFilterValue: null,\n      organizationFilterValue:null,\n      activeCourses: props.courses\n    }\n    props.routeClicked(\"Course Library\");\n  }\n\n  /** Search Function */\n  handleSearchChange(e){\n    const searchValue = e.target.value;\n    const searchValueLowerCase = searchValue.toLowerCase();\n    const activeCourses = this.props.courses.filter(course => \n      ( course.title?.toLowerCase().includes(searchValueLowerCase) \n      || course.description?.toLowerCase().includes(searchValueLowerCase) \n      || course.owner.displayName?.toLowerCase().includes(searchValueLowerCase) \n      ))\n    this.setState({\n      searchValue,\n      activeCourses\n    })\n  }\n\n  handleSearchClicked(e){\n  }\n\n  /** Sort By Functions */\n  sortByClicked = event => {\n    this.setState({\n      sortByElement: event.currentTarget\n    });\n  };\n\n  sortByHandleClose = (value) => {\n    this.setState({\n      sortByElement: null,\n      sortFilterValue: value\n    });\n  };\n\n\n  /** Topic Functions */\n  topicClicked = event => {\n    this.setState({\n      topicElement: event.currentTarget\n    });\n  };\n\n  topicHandleClose = (value) => {\n    this.setState({\n      topicElement: null,\n      topicFilterValue: value\n    });\n  };\n\n  /** Organization functions */\n  organizationClicked = event => {\n    this.setState({\n      organizationElement: event.currentTarget\n    });\n  };\n\n  organizationHandleClosed = (value) => {\n    this.setState({\n      organizationElement: null,\n      organizationFilterValue: value\n    });\n  };\n\n  async favoriteClicked(course) {\n    await FirebaseService.favoriteCourse(this.props.user, course);\n    this.props.updateUser(this.props.user.id)\n  }\n\n  async removeFavoriteClicked(course){\n    await FirebaseService.removeFavoriteCourse(this.props.user, course);\n    this.props.updateUser(this.props.user.id)\n\n  }\n\n  buildMenuItems = () => {\n    const sortByInfo = {\n      buttonText: \"Sort By\",\n      menuId: \"menu-sort-by\",\n      clickedFunction: this.sortByClicked,\n      closeFunction: this.sortByHandleClose,\n      element: this.state.sortByElement,\n      radioGroupName: \"menuRadio\",\n      menuValue: this.state.sortFilterValue,\n      menuOptions: [\n        {\n          display: \"Newest\",\n          associatedClickFunction:  this.sortByHandleClose\n        },\n        {\n          display: \"Recommended\",\n          associatedClickFunction:  this.sortByHandleClose\n        },\n        {\n          display: \"Trending\",\n          associatedClickFunction:  this.sortByHandleClose\n        }\n      ]\n    }\n\n    const topicInfo = {\n      buttonText: \"Topic\",\n      menuId: \"menu-topic\",\n      clickedFunction: this.topicClicked,\n      element: this.state.topicElement,\n      closeFunction: this.topicHandleClose,\n      radioGroupName: \"topicRadio\",\n      menuValue: this.state.topicFilterValue,\n      menuOptions: [\n        {\n          display: \"Science\",\n          associatedClickFunction:  this.topicHandleClose\n        },\n        {\n          display: \"Technology\",\n          associatedClickFunction:  this.topicHandleClose\n        },\n        {\n          display: \"History\",\n          associatedClickFunction:  this.topicHandleClose\n        },\n        {\n          display: \"Arts\",\n          associatedClickFunction:  this.topicHandleClose\n        }\n      ]\n    }\n\n    const organizationInfo = {\n      buttonText: \"Organization\",\n      menuId: \"menu-organization\",\n      clickedFunction: this.organizationClicked,\n      element: this.state.organizationElement,\n      closeFunction: this.organizationHandleClosed,\n      radioGroupName: \"organizationRadio\",\n      menuValue: this.state.organizationFilterValue,\n      menuOptions: [\n        {\n          display: \"Required\",\n          associatedClickFunction:  this.organizationHandleClosed\n        },\n        {\n          display: \"Recommended\",\n          associatedClickFunction:  this.organizationHandleClosed\n        },\n        {\n          display: \"All Courses\",\n          associatedClickFunction:  this.organizationHandleClosed\n        }\n      ]\n    }\n\n    return [sortByInfo, topicInfo, organizationInfo];\n  }\n\n  isCourseAFavorite = (user, course) => {\n    \n    if( user.favoritedCourses && user.favoritedCourses.length > 0 ){\n      return user.favoritedCourses\n        .find(favoritedCourse => favoritedCourse.id === course.id);\n    }\n    return false;\n  }\n\n\n  render() {\n    // Mappings\n    const menuItems = this.buildMenuItems();\n    const favoriteClicked = this.favoriteClicked;\n    const isCourseAFavorite = this.isCourseAFavorite;\n    const removeFavoriteClicked = this.removeFavoriteClicked\n\n    const user = this.props.user;\n    const searchInfo = {\n      value: this.state.searchValue,\n      onChange: this.handleSearchChange,\n      onClick: this.handleSearchClicked\n    }\n    let listItems = []\n    if (user) {\n\n      listItems = this.state.activeCourses.map(function(item) {\n        return (\n            <Grid item s={4}>\n              <CourseCard course={item} favoriteClicked={favoriteClicked} removeFavoriteClicked={removeFavoriteClicked} isCourseAFavorite={isCourseAFavorite(user, item)}></CourseCard>\n            </Grid>\n        );\n      });\n    }\n    \n    return (\n      <div class=\"course-library\">\n        <CourseLibraryToolbar menuItems={menuItems} searchInfo={searchInfo}></CourseLibraryToolbar>\n          <div className=\"course-list\">\n          <Grid container spacing={3}>\n            {listItems}\n          </Grid>\n          </div>\n      </div>\n\n      );\n  }\n}\n\nexport default CourseLibrary;\n","import React from 'react';\nimport './Login.css';\nimport { Button } from '@material-ui/core';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { withRouter, Redirect } from \"react-router-dom\";\nimport * as FirebaseService from '../../service/firebase.service';\n\nclass LoginPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { redirectToReferrer: false };\n    this.loginGoogle = this.loginGoogle.bind(this);\n    this.loginFacebook = this.loginFacebook.bind(this);\n\n  }\n\n  async loginGoogle(event) {\n    // TODO(jessi): set a loading state\n    await FirebaseService.logUserInUser(/* isGoog= */ true).then(u => {\n      this.props.completeLogin(u);\n      this.props.history.push(\"/courseLibrary\");\n      this.setState({ redirectToReferrer: true });\n    });\n    // TODO(jessi): unset loading state\n  }\n\n  async loginFacebook(event) {\n    // TODO(jessi): set a loading state\n    await FirebaseService.logUserInUser(/* isGoog= */ false).then(u => {\n      this.props.completeLogin(u);\n      this.props.history.push(\"/courseLibrary\");\n      this.setState({ redirectToReferrer: true });\n    });\n    // TODO(jessi): unset loading state\n  }\n\n  render() {\n    // Show loading screen while we load the user.\n    if (this.props.loadingUser) {\n      return (\n        <div>\n          Loading..\n          <CircularProgress></CircularProgress>\n        </div>\n      )\n    }\n\n    // Redirect if logged in or complete login.\n    const { from } = this.props.location.state || { from: { pathname: '/' } }\n    const { redirectToReferrer } = this.state\n    if (redirectToReferrer === true || this.props.user) {\n      return <Redirect to={from} />\n    }\n\n\n    // TODO(jessi): style these buttons\n    return (\n      <div className=\"login\">\n        <h1>Sign into Mooc in a Box</h1>\n        <Button color=\"inherit\" className=\"menu-button\" onClick={this.loginFacebook}>\n          Sign in with Facebook\n      </Button>\n        <Button color=\"inherit\" className=\"menu-button\" onClick={this.loginGoogle}>\n          Sign in with Google\n      </Button>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(LoginPage);\n","import React, { useState } from 'react';\nimport {\n  Link as RouterLink,\n} from \"react-router-dom\";\nimport {Button} from '@material-ui/core';\nimport Typography from '@material-ui/core/Typography';\n\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport Grid from '@material-ui/core/Grid';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { IconButton } from '@material-ui/core';\n\nfunction CoursesDropdownComponent(props) {\n    return (\n      <ExpansionPanel>\n              <ExpansionPanelSummary\n              expandIcon={<ExpandMoreIcon />}\n              aria-controls=\"panel1a-content\"\n              id=\"panel1a-header\"\n              >\n              <Typography variant=\"subtitle2\">{props.courses.length} Course(s)</Typography>\n              </ExpansionPanelSummary>\n              <ExpansionPanelDetails>\n              <Grid container spacing={2}>\n                  <Grid item xs={12} md={6}>\n                      <div>\n                          <List dense=\"true\">\n                          {\n                            props.courses.map( course => {\n                              console.log(course);\n                              return (\n                                <span>\n                                  <ListItem \n                                  >\n                                    <Button\n                                      component={RouterLink} \n                                      to={`/courseOverview/${course.id}`}\n                                    >\n                                      {course.title}\n                                    </Button>\n                                    { props.includeEditIcon && \n                                      <IconButton \n                                        className=\"menu-button\" \n                                        color=\"inherit\" \n                                        aria-label=\"menu\"\n                                        component={RouterLink}\n                                        to={`/editCourse/${course.id}`}\n                                      >\n                                        <EditIcon/>\n                                      </IconButton>\n                                    }\n                                  </ListItem>\n                                </span>\n                                \n                              )\n                            })\n                          }\n                          </List>\n                      </div>\n                      </Grid>\n                  </Grid>\n              </ExpansionPanelDetails>\n          </ExpansionPanel>\n    )\n  }\n\n  export default CoursesDropdownComponent;\n","import React, { useState } from 'react';\nimport './MyCourses.css';\nimport {\n  Link as RouterLink,\n} from \"react-router-dom\";\nimport { Button } from '@material-ui/core';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Paper from '@material-ui/core/Paper';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Grid from '@material-ui/core/Grid';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { Link } from 'react-router-dom'\n\nimport EditIcon from '@material-ui/icons/Edit';\nimport { IconButton } from '@material-ui/core';\n\nimport CoursesDropdownComponent from '../CoursesDropdown/CoursesDropdown.component';\n\n\n\n/**\n * \n * http://localhost:3000/courseOverview/rlfxOavBn4nPZLNTRMkL\n * http://localhost:3000/courseOverview/rlfxOavBn4nPZLNTRMkL\n */\n\n/**\n * \n * \n */\n\n\n\nfunction generate(element) {\n  return React.cloneElement(element, {\n    key: element,\n  })\n}\n\nfunction CurrentCoursesComponent(props) {\n  let numberOfCourses = props.currentCourses.length;\n\n  return (\n    <div>\n      <h2> Current Courses </h2>\n      <CoursesDropdownComponent courses={props.currentCourses}></CoursesDropdownComponent>\n    </div>\n  )\n}\n\n\nfunction PastCoursesComponent(props) {\n  return (\n    <div>\n      <h2> Past Courses </h2>\n      <CoursesDropdownComponent courses={props.pastCourses}></CoursesDropdownComponent>\n    </div>\n  )\n}\n\nfunction SavedCoursesComponent(props) {\n  return (\n    <div>\n      <h2> Favorited Courses </h2>\n      <CoursesDropdownComponent courses={props.savedCourses}></CoursesDropdownComponent>\n    </div>\n  )\n}\n\nfunction CreatedCoursesComponent(props) {\n  return (\n    <div>\n      <h2> Created Courses </h2>\n      <CoursesDropdownComponent courses={props.createdCourses} includeEditIcon={true}></CoursesDropdownComponent>\n    </div>\n  )\n}\n\n\n\nfunction MyCourses(props) {\n\n  const [user, setUser] = useState();\n  props.routeClicked(\"My Courses\");\n\n\n  React.useEffect(() => {\n    setUser(props.user);\n    console.log(props.user.createdCourses);\n\n  }, [props]);\n\n\n  if (user) {\n    const courseComponentList = []\n    let hasCourses = false;\n\n\n    if (user.currentCourses && user.currentCourses.length > 0) {\n      const element = <CurrentCoursesComponent currentCourses={user.currentCourses}></CurrentCoursesComponent>\n      courseComponentList.push(element);\n      hasCourses = true;\n    }\n\n    if (user.pastCourses && user.pastCourse.length > 0) {\n      const element = <PastCoursesComponent pastCourses={user.pastCourses}></PastCoursesComponent>\n      courseComponentList.push(element);\n      hasCourses = true;\n\n    }\n\n    if (user.favoritedCourses && user.favoritedCourses.length > 0) {\n      const element = <SavedCoursesComponent savedCourses={user.favoritedCourses}></SavedCoursesComponent>\n      courseComponentList.push(element);\n      hasCourses = true;\n\n    }\n\n    if (user.createdCourses && user.createdCourses.length > 0) {\n      const element = <CreatedCoursesComponent createdCourses={user.createdCourses}></CreatedCoursesComponent>\n      courseComponentList.push(element);\n      hasCourses = true;\n\n    }\n    if (hasCourses) {\n      return (\n        <div className=\"MyCourses\">\n          <CssBaseline />\n          <Container maxWidth=\"lg\">\n            <Paper className=\"paper\">\n              {\n                courseComponentList.map(element => element)\n              }\n            </Paper>\n          </Container>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"MyCourses\">\n          <CssBaseline />\n          <Container maxWidth=\"lg\">\n            <Paper className=\"paper\">\n              <h4>You don't have any courses saved yet!</h4>\n            </Paper>\n          </Container>\n        </div>\n      )\n    }\n\n\n  } else {\n    return (\n      <div>\n        Loading..\n        <CircularProgress></CircularProgress>\n      </div>\n    )\n  }\n\n}\n\nexport default MyCourses;\n","import React from 'react';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { Button } from '@material-ui/core';\nimport TextField from '@material-ui/core/TextField';\n\nfunction EditDialog(props) {\n  return (\n    <div>\n      <Dialog open={props.isOpen} onClose={props.handleClose} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">{props.field}</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Edit the Field below to update your {props.field}\n          </DialogContentText>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            label={props.field}\n            value={props.value}\n            onChange={props.onChange}\n            type=\"email\"\n            color=\"secondary\"\n            fullWidth\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.handleClose} color=\"secondary\">\n            Cancel\n            </Button>\n          <Button onClick={props.handleSubmit} color=\"secondary\">\n            Submit\n            </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  )\n}\n\nexport default EditDialog","import React from 'react';\n\n\nimport Typography from '@material-ui/core/Typography';\nimport { IconButton } from '@material-ui/core';\nimport EditIcon from '@material-ui/icons/Edit';\nimport EditDialog from '../EditDialog/EditDialog.component';\n\nconst userKeyToDisplayMap = {\n    \"displayName\": \"Display Name\",\n    \"email\": \"Email Address\",\n    \"password\": \"Password\"\n  }\n\nfunction UserProfileSection(props){\n    function getEditIconIfNecessary(){\n      return props.isEditable ? \n        <IconButton className=\"menu-button\" color=\"inherit\" aria-label=\"menu\">\n          <EditIcon onClick={props.openDialog}/>\n        </IconButton>\n        :\n        <div></div>\n    }\n\n\n    return (\n      <div>\n        <Typography align=\"center\" variant=\"h6\" component=\"h6\">\n          <strong>{props.displayValue}</strong>\n        </Typography>\n        <Typography align=\"center\" variant=\"body1\" component=\"body1\">\n          <span>\n            {props.value}\n            {getEditIconIfNecessary()}\n          </span>\n        </Typography>\n        <EditDialog \n          isOpen={props.isDialogOpen}\n          handleClose={props.handleClose}\n          handleSubmit={props.handleSubmit}\n          field={userKeyToDisplayMap[props.displayKey]}\n          value={props.value}\n          onChange={props.onChange}\n        />\n      </div>\n    )\n}\n\nexport default UserProfileSection\n  ","import React, { useState } from 'react';\nimport './UserProfile.css';\n\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Paper from '@material-ui/core/Paper';\nimport Divider from '@material-ui/core/Divider';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport UserProfileSection from './UserProfileSection/UserProfileSection.component';\nimport { Button } from '@material-ui/core';\nimport { withRouter } from \"react-router-dom\";\nimport * as FirebaseService from '../../service/firebase.service';\n\nconst passwordValue = \"*******\";\n\nfunction UserProfile(props) {\n\n\n  const [displayName, setDisplayName] = useState(null);\n  const [oldDisplayName, setOldDiplayName] = useState(null);\n  const [error, setError] = useState();\n  const [isDisplayNameDialogOpen, setIsDisplayNameDialogOpen] = useState(false)\n  const [userInterests, setUserInterests] = useState(null);\n  const [oldUserInterests, setOldUserInterests] = useState(null);\n  const [isUserInterestsDialogOpen, setIsUserInterestsDialogOpen] = useState(false);\n\n  props.routeClicked(\"User Profile\");\n\n\n\n  function handleDisplayNameClose() {\n    setDisplayName(oldDisplayName)\n    setIsDisplayNameDialogOpen(false)\n  }\n\n  function handleDisplayNameSubmit() {\n    FirebaseService.updateUser(props.user.id, {\n      displayName\n    }).then(result => {\n      setIsDisplayNameDialogOpen(false)\n      setOldDiplayName(displayName)\n      props.updateUser(props.user.id);\n\n    })\n      .catch(err => {\n        console.log(err);\n      })\n  }\n\n  function openDisplayNameDialog() {\n    setOldDiplayName(displayName)\n    setIsDisplayNameDialogOpen(true)\n  }\n\n  function onDisplayNameChange(e) {\n    setDisplayName(e.target.value);\n  }\n\n  /**\n   * Begin User Interests\n   */\n  function handleUserInterestsDialogClose() {\n    setUserInterests(oldUserInterests)\n    setIsUserInterestsDialogOpen(false)\n  }\n\n  function openUserInterestDialog() {\n    setOldUserInterests(userInterests)\n    setIsUserInterestsDialogOpen(true)\n  }\n\n  function onUserInterestsChange(e) {\n    setUserInterests(e.target.value);\n  }\n\n  function handleUserInterestSubmit() {\n    FirebaseService.updateUser(props.user.id, {\n      interests: userInterests\n    }).then(result => {\n      setIsUserInterestsDialogOpen(false)\n      setUserInterests(userInterests)\n      props.updateUser(props.user.id);\n    })\n      .catch(err => {\n        console.log(err);\n      })\n  }\n\n  async function signOut() {\n    await FirebaseService.signOut().then((res) => {\n      if (res) {\n        props.history.push(\"/\");\n        props.updateUser(undefined);\n      }\n      // TODO(jessi) handle error\n    });\n  }\n\n  async function deleteAccount() {\n    await FirebaseService.deleteUser().then((res) => {\n      if (res) {\n        props.history.push(\"/\");\n        props.updateUser(undefined);\n      }\n      // TODO(jessi) handle error\n    });\n  }\n\n  if (props.user && displayName === null && userInterests === null) {\n    setDisplayName(props.user.displayName)\n    setUserInterests(props.user.interests)\n  }\n\n  if (props.user) {\n    return (\n      <div className=\"userProfile\">\n        <CssBaseline />\n        <Typography className=\"center\" variant=\"h3\" component=\"h3\">\n          User Profile\n        </Typography>\n        <Container className=\"userProfile-bottom-padding\" maxWidth=\"lg\">\n          <Paper className=\"paper\">\n\n            <UserProfileSection\n              isEditable={true}\n              displayValue=\"User Interests\"\n              value={userInterests}\n              handleClose={handleUserInterestsDialogClose}\n              handleSubmit={handleUserInterestSubmit}\n              isDialogOpen={isUserInterestsDialogOpen}\n              openDialog={openUserInterestDialog}\n              onChange={onUserInterestsChange}\n              isEditable={true}\n            ></UserProfileSection>\n\n          </Paper>\n        </Container>\n        <Divider />\n\n\n        <Container maxWidth=\"lg\">\n          <Paper className=\"paper\">\n\n            <UserProfileSection\n              isEditable={true}\n              displayValue=\"Display Name\"\n              value={displayName}\n              handleClose={handleDisplayNameClose}\n              handleSubmit={handleDisplayNameSubmit}\n              isDialogOpen={isDisplayNameDialogOpen}\n              openDialog={openDisplayNameDialog}\n              onChange={onDisplayNameChange}\n            />\n            <Divider />\n            <UserProfileSection \n              isEditable={false} \n              displayValue=\"Email\" \n              value={props.user.email}\n            />\n            <Divider />\n            <div className=\"logout-btns\">\n              <Button color=\"inherit\" className=\"menu-button\" onClick={signOut}>\n                Sign out\n              </Button>\n              <Button color=\"inherit\" className=\"menu-button\" onClick={deleteAccount}>\n                Delete account\n              </Button>\n            </div>\n          </Paper>\n        </Container>\n      </div>\n    );\n  } else {\n    return (\n      <div>\n        Loading..\n        <CircularProgress></CircularProgress>\n      </div>\n    )\n  }\n\n}\n\nexport default withRouter(UserProfile);\n","import React, { useState, useEffect } from 'react';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Input from '@material-ui/core/Input';\nimport { Button } from '@material-ui/core';\nimport TextField from '@material-ui/core/TextField';\nimport { Editor } from 'react-draft-wysiwyg';\nimport { EditorState, convertFromRaw, convertToRaw, RichUtils } from 'draft-js';\nimport '../../../../node_modules/react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport './CreateCourseDialog.css'\n\n\nfunction CreateCourseDialog(props) {\n  const [description, setDescription] = useState(props.course?.description);\n  const [title, setTitle] = useState(props.course?.title);\n  const [editorState, setEditorState] = useState();\n  const [overview, setOverview] = useState(props.course?.overview);\n  const [isTitleError, setIsTitleError] = useState(false);\n  const [isDescriptionError, setIsDescriptionError] = useState(false);\n  const [thumbnailFile, setThumbnailFile] = useState();\n\n\n\n  function onCourseTitleChange(e) {\n    setTitle(e.target.value);\n  }\n\n  function onCourseDescriptionChange(e) {\n    setDescription(e.target.value);\n\n  }\n\n  function onEditorStateChange(editorState) {\n    setEditorState(editorState);\n  };\n\n  function onFileUploadChange({target}){\n    console.log(\"Upload happened\");\n    // const fileReader = new FileReader();\n    // const name = target.accept.includes('image') ? 'images' : 'videos';\n    const file = target.files[0];\n    console.log(file);\n    setThumbnailFile(file);\n  }\n\n\n  function handleKeyCommand(command) {\n    console.log(\"In here: \", command);\n    const newState = RichUtils.handleKeyCommand(editorState, command);\n    if (newState) {\n      setEditorState(newState);\n      setOverview(convertToRaw(newState.getCurrentContent()));\n\n      return 'handled';\n    }\n    return 'not-handled';\n  };\n\n  function isValidTitle(){\n    if (title && title.length > 0) {\n      setIsTitleError(false)\n      return true;\n    } else {\n      setIsTitleError(true);\n      return false;\n    }\n\n  }\n\n  function isValidDescription(){\n    if (description && description.length > 0) {\n      setIsDescriptionError(false)\n      return true;\n    } else {\n      setIsDescriptionError(true);\n      return false;\n    }\n    \n\n  }\n\n\n  function handleSubmit() {\n\n    const titleIsGood = isValidTitle();\n    const descriptionIsGood = isValidDescription();\n\n    if( titleIsGood && descriptionIsGood){\n      const currentContentState = editorState.getCurrentContent();\n      setOverview(convertToRaw(currentContentState));\n\n      const courseDetails = {\n        title,\n        description,\n        overview: convertToRaw(currentContentState),\n        thumbnailFile\n      }\n      console.log(courseDetails);\n      props.handleSubmit(courseDetails);\n    }\n  }\n\n  function handleClose(){\n    setIsTitleError(false)\n    setIsDescriptionError(false)\n    setDescription(props.course?.description)\n    setTitle(props.course?.title)\n    setOverview(props.course?.overview)\n    props.handleClose();\n  }\n\n\n  useEffect(() => {\n    if (overview) {\n      setEditorState(EditorState.createWithContent(convertFromRaw(JSON.parse(overview))));\n    }\n    else {\n      setEditorState(EditorState.createEmpty());\n    }\n  },[]);\n\n\n  return (\n    <div>\n      <Dialog open={props.isOpen} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">Create A New Course</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            { \n              props.course ?\n              \"Edit this existing courses title, description, or overview.\"\n              :\n              \"Create a new course. Start by entering at least the title and description below.\"\n            }\n            </DialogContentText>\n          <TextField\n            autoFocus\n            required\n            error={isTitleError}\n            margin=\"dense\"\n            id=\"title\"\n            label=\"Course Title\"\n            onChange={onCourseTitleChange}\n            type=\"text\"\n            color=\"secondary\"\n            value={title}\n            fullWidth\n          />\n          <TextField\n            margin=\"dense\"\n            id=\"description\"\n            error={isDescriptionError}\n            label=\"Course Description\"\n            required\n            onChange={onCourseDescriptionChange}\n            helperText=\"This is a required field and is shown on the card in the Course Library\"\n            type=\"text\"\n            color=\"secondary\"\n            value={description}\n            fullWidth\n          />\n          <h4>Course Overview:</h4>\n          <div className=\"course-overview-section\">\n            <Editor\n              editorState={editorState}\n              editorClassName=\"editor-textbox\"\n              handleKeyCommand={handleKeyCommand}\n              onEditorStateChange={onEditorStateChange}\n              label=\"Course Overview\"\n            />\n          </div>\n          <h4>Course Thumbnail:</h4>\n          <Input\n            label=\"Upload Course Thumbnail\"\n            type=\"file\"\n            onChange={onFileUploadChange}\n            >\n            \n          </Input>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} color=\"secondary\">\n            Cancel\n            </Button>\n          <Button onClick={handleSubmit} color=\"secondary\">\n            Submit\n            </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  )\n}\n\nexport default CreateCourseDialog","import React, { useState } from 'react';\nimport './CreateCourse.css';\nimport { Button } from '@material-ui/core';\n\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Paper from '@material-ui/core/Paper';\nimport Divider from '@material-ui/core/Divider';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { withRouter } from \"react-router-dom\";\nimport * as FirebaseService from '../../service/firebase.service';\nimport CreateCourseDialog from './CreateCourseDialog/CreateCourseDialog.component';\nimport CoursesDropdownComponent from '../CoursesDropdown/CoursesDropdown.component';\nimport { useHistory } from \"react-router-dom\";\n\n\nfunction CreatedCoursesComponent(props) {\n\n  return (\n    <div className=\"courses-section\">\n      <h2> Courses You've Created </h2>\n      <CoursesDropdownComponent courses={props.createdCourses} includeEditIcon={true}></CoursesDropdownComponent>\n    </div>\n  )\n}\n\nfunction CreateCourse(props) {\n  const [isCreateCourseDialogOpen, setIsCreateCourseDialogOpen] = useState(false);\n  const history = useHistory();\n\n  props.routeClicked(\"Create Course\");\n\n\n  function handleCreateCourseDialogClose() {\n    setIsCreateCourseDialogOpen(false);\n  }\n\n  function openCreateCourseDialog() {\n    setIsCreateCourseDialogOpen(true);\n\n  }\n\n  async function handleSubmit(courseInfo) {\n    courseInfo.owner = props.user.id;\n\n    courseInfo.chapters = []\n\n    const response = await FirebaseService.createCourse(props.user, courseInfo)\n    setIsCreateCourseDialogOpen(false);\n    await props.updateCourses();\n    await props.updateUser(props.user.id);\n    // Navigate to Edit Course page\n    history.push(`/editCourse/${props.user.createdCoursesRefs[props.user.createdCoursesRefs.length - 1].id}`)\n  }\n\n  const hasCurrentCourses = false\n  let currnetCoursesSection = null;\n  if (props.user && props.user.createdCourses && props.user.createdCourses.length > 0) {\n    currnetCoursesSection = <CreatedCoursesComponent createdCourses={props.user.createdCourses}></CreatedCoursesComponent>\n  } else {\n    currnetCoursesSection = <h3>You have not created any courses</h3>\n  }\n\n\n  return (\n    <div className=\"CreateCourse\">\n      <CssBaseline />\n      <Container className=\"userProfile-bottom-padding\" maxWidth=\"lg\">\n        <Paper className=\"paper\">\n          {\n            currnetCoursesSection\n          }\n          <span>\n            <Button variant=\"contained\" color=\"secondary\" onClick={openCreateCourseDialog}>\n              Create New Course\n              </Button>\n          </span>\n        </Paper>\n      </Container>\n\n      <CreateCourseDialog\n        isOpen={isCreateCourseDialogOpen}\n        handleClose={handleCreateCourseDialogClose}\n        handleSubmit={handleSubmit}\n        user={props.user}\n      />\n\n\n    </div>\n  );\n}\n\nexport default CreateCourse;\n","import React, { useState, useEffect } from 'react';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport { Button } from '@material-ui/core';\n\n\nimport './CourseChapterPanel.css';\n\nfunction CourseChapterPanel(props) {\n\n    function listItemClicked(lesson) {\n        props.setChapterInContext(props.chapter);\n        props.setActiveLesson(lesson);\n    }\n\n    let lessonItems = []\n\n    const lessonsLength = props.chapter?.lessons?.length;\n    if (lessonsLength > 0) {\n        lessonItems = props.chapter.lessons.map(lesson => {\n            const isActiveLesson = (lesson === props.activeLesson);\n\n            return (\n                <span>\n                    <ListItem selected={isActiveLesson} onClick={() => listItemClicked(lesson)} id={lesson.id} button>\n                        <ListItemText primary={lesson.title} />\n                    </ListItem>\n                </span>\n            )\n        });\n    } else {\n        lessonItems[0] = <ListItem> <ListItemText primary=\"No Lessons Added\" /> </ListItem>\n    }\n\n\n    function openLessonModal() {\n        props.setChapterInContext(props.chapter);\n        props.openLessonModal(/**addLesson=*/true);\n    }\n\n    let addNewLessonButton;\n\n    if (props.editable) {\n        addNewLessonButton = <Button variant=\"contained\" onClick={openLessonModal} color=\"secondary\" className=\"add-content-btn\"> Add New Lesson </Button>\n    }\n\n\n    return (\n        <ExpansionPanel\n            defaultExpanded={props.chapter === props.chapterInContext}\n        >\n            <ExpansionPanelSummary\n                expandIcon={<ExpandMoreIcon />}\n                aria-controls=\"panel1a-content\"\n                id=\"panel1a-header\"\n            >\n                <Typography variant=\"subtitle2\">{props.chapter.title}</Typography>\n            </ExpansionPanelSummary>\n            <ExpansionPanelDetails>\n\n                <List dense=\"true\" className=\"lessons-list\">\n                    {lessonItems}\n                    {addNewLessonButton}\n                </List>\n\n            </ExpansionPanelDetails>\n        </ExpansionPanel>\n    )\n}\n\nexport default CourseChapterPanel;","import React from 'react';\nimport './CourseNavigationPane.css';\nimport Paper from '@material-ui/core/Paper';\nimport { IconButton, Button } from '@material-ui/core';\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\n\n\nimport CourseChapterPanel from './CourseChapterPanel/CourseChapterPanel.component';\n\n\n/**\n * Generate multiple function\n */\n\n\nfunction generate(element) {\n  return [0, 1, 2].map(value =>\n    React.cloneElement(element, {\n      key: value,\n    }),\n  );\n}\n\n\n\n\nfunction CourseNavigationPane(props) {\n\n  function setChapterInContext(chapter) {\n    props.setChapterInContext(chapter);\n  }\n\n  const courseOverviewClicked = () => {\n    props.setActiveLesson(undefined);\n    props.setChapterInContext(undefined);\n  }\n\n  const openDeleteDialog = (e) => {\n    console.log(\"This is being called\");\n    props.openDeleteDialog(\"Course\", props.course);\n  }\n\n  let courseNavigationPanels = []\n  const chaptersLength = props.course?.chapters?.length;\n\n  if (chaptersLength > 0) {\n    courseNavigationPanels = props.course.chapters.map(chapter =>\n      <CourseChapterPanel editable={props.editable} setActiveLesson={props.setActiveLesson} activeLesson={props.activeLesson} openLessonModal={props.openLessonModal} chapterInContext={props.chapterInContext} setChapterInContext={setChapterInContext} chapter={chapter} />\n    )\n  }\n\n  let addNewChapterButton;\n  let deleteCourseButton;\n  if (props.editable) {\n    addNewChapterButton = <Button variant=\"contained\" onClick={props.openCreateChapterDialog} color=\"secondary\"> Add New Chapter </Button>\n    deleteCourseButton = <IconButton onClick={openDeleteDialog}> <DeleteForeverIcon/> </IconButton>\n  }\n\n\n  return (\n    <Paper className=\"paper\">\n    <span>\n        <Button id=\"course-overview\" size=\"medium\"\n          onClick={courseOverviewClicked}>\n          {props.course.title}\n        </Button>\n        {deleteCourseButton}\n        <br />\n      </span>\n      {courseNavigationPanels}\n      {addNewChapterButton}\n    </Paper>\n  )\n}\n\nexport default CourseNavigationPane;","import React, { useState } from 'react';\nimport YouTube from 'react-youtube';\nimport { IconButton, Button, Typography } from '@material-ui/core';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport { Editor } from 'react-draft-wysiwyg';\nimport { EditorState, convertFromRaw, ContentState } from \"draft-js\";\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\n// import './CourseLesson.css';\n\n// Youtube Constants\n\nconst YoutubeComponentConfig = {\n    opts: {\n        height: '390',\n        width: '640',\n        playerVars: {\n            autoplay: 0,\n        },\n    },\n    videoId: \"BKorP55Aqvg\"\n\n}\n\n\nfunction EditCourseLesson(props) {\n\n    let hasYoutubeVideo = false;\n\n    function _onReady(event) {\n        // access to player in all event handlers via event.target\n        event.target.pauseVideo();\n    }\n\n\n    function openDeleteDialog(e){\n        props.openDeleteDialog(\"Lesson\", props.lesson);\n    }\n\n\n    function goToPreviousLesson() {\n        props.navigateToPreviousLesson(props.lesson);\n    }\n\n    function goToNextLesson() {\n        props.navigateToNextLesson(props.lesson);\n    }\n\n    function getButtonDiv() {\n        if (props.isFirstLesson && props.isLastLesson) {\n            return '';\n        }\n\n        let leftButton, rightButton;\n\n        if (props.nextLesson || props.nextChapter) {\n            leftButton =\n                <Button variant=\"contained\" onClick={goToNextLesson} className=\"next-button\" color=\"secondary\" endIcon={<ArrowForwardIosIcon />}>\n                    {props.nextLesson ? \"Next Lesson\" : \"Next Chapter\"}\n                </Button>\n        }\n\n        if (props.prevLesson || props.prevChapter) {\n            rightButton =\n                <Button variant=\"contained\" onClick={goToPreviousLesson} className=\"previous-button\" color=\"secondary\" startIcon={<ArrowBackIosIcon />}>\n                    {props.prevLesson ? \"Previous Lesson\" : \"Previous Chapter\"}\n                </Button>\n        }\n\n        return (\n            <div className=\"button-div\">\n                {leftButton}\n                {rightButton}\n            </div>\n        )\n    }\n\n    function getVideoConfig() {\n        const youtubeConfig = { ...YoutubeComponentConfig };\n        const url = props.lesson?.video;\n        if (url && url.includes(\"youtube\") && (url.includes(\"v=\"))) {\n            const myParamters = url.split(\"?\");\n            var searchParams = new URLSearchParams(myParamters[1]);\n            youtubeConfig.videoId = searchParams.get('v');\n            hasYoutubeVideo = true;\n        }\n        return youtubeConfig;\n    }\n\n    function isJson(str) {\n        try {\n            JSON.parse(str);\n        } catch (e) {\n            return false;\n        }\n        return true;\n    }\n\n    let content = undefined;\n    if (props.lesson?.description && isJson(props.lesson.description)) {\n        const contentStateObj = JSON.parse(props.lesson.description);\n        const editorState = EditorState.createWithContent(convertFromRaw(contentStateObj));\n        content = <Editor\n            toolbarHidden\n            editorState={editorState}\n            readOnly={true}\n        />\n    }\n    else {\n        const text = props.lesson?.description ? props.lesson.description : \"No text entered.\";\n        content = <Editor\n            toolbarHidden\n            editorState={EditorState.createWithContent(ContentState.createFromText(text))}\n            readOnly={true}\n        />\n    }\n\n    if (props.lesson) {\n        const youtubeConfig = getVideoConfig();\n\n        return (\n            <div>\n                <span className=\"class-title\">\n                    <p> {props.lesson.title}\n                    {   props.editable ? \n                        <IconButton onClick={openDeleteDialog}>\n                            <DeleteForeverIcon/>\n                        </IconButton>\n                        :\n                        ''\n                    }\n                    </p>\n                </span>\n                {\n                    hasYoutubeVideo\n                        ?\n                        <YouTube videoId={youtubeConfig.videoId} opts={youtubeConfig.opts} onReady={_onReady} />\n                        :\n                        \"\"\n                }\n                {content}\n                {getButtonDiv()}\n            </div>\n        )\n    } else {\n        return (\n            <div>\n                <h5> No Lesson Details </h5>\n            </div>\n        )\n    }\n}\n\nexport default EditCourseLesson;","import React from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport CourseLesson from './CourseLesson/CourseLesson.component';\nimport { Button } from '@material-ui/core';\nimport { Editor } from 'react-draft-wysiwyg';\nimport { EditorState, convertFromRaw, ContentState } from \"draft-js\";\n\nimport './CourseOverviewPane.css';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\n\nfunction CourseOverviewPane(props) {\n\n    let lessonArray = [];\n    for (let i = 0; i < props.course.chapters.length; i++) {\n        for (let j = 0; j < props.course.chapters[i].lessons?.length; j++) {\n            lessonArray.push(props.course.chapters[i].lessons[j]);\n        }\n    }\n\n    function navigateToNextLesson(lesson) {\n        const indexOfCurrentLesson = props.activeChapter.lessons.indexOf(lesson);\n        if (indexOfCurrentLesson !== props.activeChapter.lessons.length - 1) {\n            props.setActiveLesson(props.activeChapter.lessons[indexOfCurrentLesson + 1]);\n            return;\n        } else {\n            const activeChapterIndex = props.course.chapters.indexOf(props.activeChapter);\n            const nextChapter = props.course.chapters[activeChapterIndex + 1];\n            props.setChapterInContext(nextChapter);\n            props.setActiveLesson(nextChapter.lessons[0]);\n        }\n    }\n\n    function navigateToPreviousLesson(lesson) {\n        const indexOfCurrentLesson = props.activeChapter.lessons.indexOf(lesson);\n\n        if (indexOfCurrentLesson !== 0) {\n            props.setActiveLesson(props.activeChapter.lessons[indexOfCurrentLesson - 1]);\n            return;\n        } else {\n            const activeChapterIndex = props.course.chapters.indexOf(props.activeChapter);\n            const prevChapter = props.course.chapters[activeChapterIndex - 1];\n            props.setChapterInContext(prevChapter);\n            props.setActiveLesson(prevChapter.lessons[prevChapter.lessons.length - 1]);\n        }\n\n    }\n\n    function openLessonModal() {\n        props.openLessonModal(/**addLesson=*/false);\n    }\n\n\n    let openEditCourseOverviewDialogButton;\n    let addNewLessonButton;\n    if (props.editable) {\n        openEditCourseOverviewDialogButton = <Button onClick={props.openEditCourseOverviewDialog} color=\"secondary\" variant=\"contained\"> Edit Course Information </Button>\n        addNewLessonButton = <Button variant=\"contained\" onClick={openLessonModal} color=\"secondary\" className=\"add-content-btn\"> Edit Lesson </Button>\n    }\n\n    let content = undefined;\n    if (props.course.overview) {\n        const contentStateObj = JSON.parse(props.course.overview);\n        const editorState = EditorState.createWithContent(convertFromRaw(contentStateObj));\n        content = <Editor\n            toolbarHidden\n            editorState={editorState}\n            readOnly={true}\n        />\n    }\n    else {\n        content = <Editor\n            toolbarHidden\n            editorState={EditorState.createWithContent(ContentState.createFromText(\"No text entered.\"))}\n            readOnly={true}\n        />\n    }\n\n    function getLessonInformation() {\n        let prevLesson, nextLesson, prevChapter, nextChapter = false;\n\n        if (props.activeLesson) {\n            const currentLessonIndex = lessonArray.indexOf(props.activeLesson);\n            const currentLessonIndexInChapter = props.activeChapter.lessons.indexOf(props.activeLesson);\n            const numLessonsInChapter = props.activeChapter.lessons.length;\n            const numChapters = props.course.chapters.length;\n            const activeChapterIndex = props.course.chapters.indexOf(props.activeChapter);\n\n            prevLesson = currentLessonIndexInChapter > 0;\n            nextLesson = currentLessonIndexInChapter < numLessonsInChapter - 1;\n            prevChapter = currentLessonIndexInChapter === 0 && currentLessonIndex > 0\n            nextChapter = currentLessonIndexInChapter === numLessonsInChapter - 1\n                && currentLessonIndex < lessonArray.length - 1\n                && activeChapterIndex !== numChapters - 1;\n        }\n\n        return [prevLesson, nextLesson, prevChapter, nextChapter]\n    }\n\n\n    let prevLesson, nextLesson, prevChapter, nextChapter = false;\n    if (props.activeLesson) {\n        [prevLesson, nextLesson, prevChapter, nextChapter] = getLessonInformation();\n    }\n\n    return (\n        <Paper className=\"paper\">\n            {props.activeChapter ?\n                <div>\n                    <CourseLesson\n                        navigateToNextLesson={navigateToNextLesson}\n                        navigateToPreviousLesson={navigateToPreviousLesson}\n                        prevLesson={prevLesson}\n                        nextLesson={nextLesson}\n                        prevChapter={prevChapter}\n                        nextChapter={nextChapter}\n                        lesson={props.activeLesson}\n                        editable={props.editable}\n                        openDeleteDialog={props.openDeleteDialog}\n                    />\n                    {addNewLessonButton}\n                </div> :\n                <div>\n                    {content}\n                    {openEditCourseOverviewDialogButton}\n                </div>\n            }\n        </Paper>\n    )\n}\n\nexport default CourseOverviewPane;","import React, { useState } from 'react';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { Button } from '@material-ui/core';\nimport TextField from '@material-ui/core/TextField';\n\nfunction CreateChapterDialog(props) {\n  const [description, setDescription] = useState();\n  const [title, setTitle] = useState();\n\n  function onCourseTitleChange(e) {\n    setTitle(e.target.value);\n  }\n\n  function onCourseDescriptionChange(e) {\n    setDescription(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    const chapterInfo = {\n      title,\n      description,\n    }\n\n    props.handleSubmit(chapterInfo);\n  }\n\n\n  return (\n    <div>\n      <Dialog open={props.isOpen} onClose={props.handleClose} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">Create New Chapter</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Create a new chapter within your course. Enter a title and description below.\n            </DialogContentText>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"title\"\n            label=\"Chapter Title\"\n            onChange={onCourseTitleChange}\n            type=\"text\"\n            color=\"secondary\"\n            fullWidth\n          />\n          <TextField\n            margin=\"dense\"\n            id=\"description\"\n            label=\"Chapter Description\"\n            onChange={onCourseDescriptionChange}\n            type=\"text\"\n            color=\"secondary\"\n            fullWidth\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.handleClose} color=\"secondary\">\n            Cancel\n            </Button>\n          <Button onClick={handleSubmit} color=\"secondary\">\n            Submit\n            </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  )\n}\n\nexport default CreateChapterDialog","import React, { useState, useEffect } from 'react';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { Button } from '@material-ui/core';\nimport TextField from '@material-ui/core/TextField';\nimport { Editor } from 'react-draft-wysiwyg';\nimport { EditorState, convertFromRaw, ContentState, convertToRaw, RichUtils } from \"draft-js\";\n\n// import './CreateLessonDialog.css';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\n\nfunction CreateLessonDialog(props) {\n  const [description, setDescription] = useState();\n  const [title, setTitle] = useState();\n  const [video, setVideo] = useState();\n  const [isDescriptionError, setIsDescriptionError] = useState(false);\n  const [isTitleError, setIsTitleError] = useState(false);\n  const [isYoutubeError, setIsYoutubeError] = useState(false);\n  const [editorState, setEditorState] = useState();\n\n  function onEditorStateChange(editorState) {\n    setEditorState(editorState);\n    const currentContentState = editorState.getCurrentContent();\n    setDescription(JSON.stringify(convertToRaw(currentContentState)));\n  };\n\n  function handleKeyCommand(command) {\n    const newState = RichUtils.handleKeyCommand(editorState, command);\n    if (newState) {\n      setEditorState(newState);\n      return 'handled';\n    }\n    return 'not-handled';\n  };\n\n  function onCourseTitleChange(e) {\n    setTitle(e.target.value);\n  }\n\n  function onVideoUrlChange(e) {\n    setVideo(e.target.value);\n  }\n\n  function isValidTitle() {\n    if (title && title.length > 0) {\n      setIsTitleError(false)\n      return true;\n    } else {\n      setIsTitleError(true);\n      return false;\n    }\n\n  }\n\n  function isValidDescription() {\n    if (description && (isJson(description) || description.length > 0)) {\n      setIsDescriptionError(false)\n      return true;\n    } else {\n      setIsDescriptionError(true);\n      return false;\n    }\n  }\n\n  function isValidYoutubeURL() {\n    if (video === undefined || video.length === 0) {\n      setIsYoutubeError(false);\n      return true;\n    } else if (video && video.includes(\"youtube\") && (video.includes(\"v=\"))) {\n      setIsYoutubeError(false);\n      return true;\n    } else {\n      setIsYoutubeError(true);\n      return false;\n    }\n  }\n\n  function handleSubmit(e) {\n    const id = props.lesson?.id ? props.lesson.id : undefined;\n\n    const currentContentState = editorState.getCurrentContent();\n    const descriptionJSON = JSON.stringify(convertToRaw(currentContentState));\n    setDescription(descriptionJSON);\n\n    let tempVideo = \"\";\n    if (isValidTitle() && isValidDescription() && isValidYoutubeURL()) {\n      if (video === undefined || video.length === 0) {\n        setVideo(\"\"); // So firebase won't die with undefined.\n      } else {\n        tempVideo = video;\n      }\n      const lessonInfo = {\n        id,\n        title,\n        description: descriptionJSON,\n        video: tempVideo,\n      }\n      props.updateLesson(lessonInfo, props.add);\n    }\n  }\n\n  function handleClose() {\n    // Reset State\n    setTitle();\n    setVideo();\n    setDescription();\n    setIsTitleError(false);\n    setIsDescriptionError(false);\n    setIsYoutubeError(false);\n    setEditorState(EditorState.createEmpty());\n    props.handleClose();\n  }\n\n  function isJson(str) {\n    try {\n      JSON.parse(str);\n    } catch (e) {\n      return false;\n    }\n    return true;\n  }\n\n  useEffect(() => {\n    if (!props.add && props.lesson) {\n      setTitle(props.lesson.title);\n      setDescription(props.lesson.description);\n      setVideo(props.lesson.video);\n      if (props.lesson.description) {\n        if (isJson(props.lesson.description)) {\n          setEditorState(EditorState.createWithContent(convertFromRaw(JSON.parse(props.lesson.description))));\n        } else {\n          // For backwards compatibility\n          setEditorState(EditorState.createWithContent(ContentState.createFromText(props.lesson.description)));\n        }\n      }\n      else {\n        setEditorState(EditorState.createEmpty());\n      }\n    } else {\n      setTitle()\n      setDescription()\n      setVideo()\n      setEditorState(EditorState.createEmpty());\n    }\n\n  }, [props]);\n\n  return (\n    <div>\n      <Dialog open={props.isOpen} onClose={handleClose} aria-labelledby=\"form-dialog-title\" maxWidth=\"md\">\n        <DialogTitle id=\"form-dialog-title\">{props.add ? \"Create New\" : \"Edit\"} Lesson</DialogTitle>\n        <DialogContent>\n          {props.add ?\n            <DialogContentText>\n              Add a new lesson to your course\n            </DialogContentText>\n            :\n            <DialogContentText>\n              Edit existing lesson\n            </DialogContentText>\n          }\n\n          <TextField\n            autoFocus\n            required\n            margin=\"normal\"\n            error={isTitleError}\n            id=\"title\"\n            label=\"Lesson Title\"\n            onChange={onCourseTitleChange}\n            type=\"text\"\n            color=\"secondary\"\n            value={title}\n            helperText={isTitleError ? \"Title is a required field\" : \"\"}\n            fullWidth\n          />\n          <TextField\n            margin=\"normal\"\n            error={isYoutubeError}\n            id=\"video\"\n            label=\"Video URL (optional)\"\n            onChange={onVideoUrlChange}\n            type=\"text\"\n            color=\"secondary\"\n            value={video}\n            helperText={isYoutubeError ? \"Youtube URL is malformed. It must have the form: https://www.youtube.com?v=<SomeCharacterString>\" : \"\"}\n            fullWidth\n          />\n          <Editor\n            editorState={editorState}\n            wrapperClassName=\"editor-wrapper\"\n            editorClassName=\"editor-textbox\"\n            handleKeyCommand={handleKeyCommand}\n            onEditorStateChange={onEditorStateChange}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.handleClose} color=\"secondary\">\n            Cancel\n            </Button>\n          <Button onClick={handleSubmit} color=\"secondary\">\n            Submit\n            </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  )\n}\n\nexport default CreateLessonDialog","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nexport default function DeleteDialog(props) {\n\n  const handleSubmit = () => {\n    props.handleSubmit();\n  }\n\n  console.log(props);\n\n  return (\n    <div>\n      <Dialog\n        open={props.isOpen}\n        onClose={props.handleClose}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">{`Delete ${props.deleteType}?`}</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">\n           Are you sure you want to delete this { props.deleteType?.toLowerCase() } ?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.handleClose} color=\"secondary\" autoFocus>\n            Disagree\n          </Button>\n          <Button onClick={handleSubmit} color=\"secondary\" >\n            Agree\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}","import React, { useEffect, useState } from 'react';\nimport './CourseOverview.css';\nimport {\n    Link as RouterLink,\n    useParams,\n    useHistory\n} from \"react-router-dom\";\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { withRouter } from \"react-router-dom\";\nimport { Button } from '@material-ui/core';\nimport * as FirebaseService from '../../service/firebase.service';\nimport CourseNavigationPane from './CourseNavigationPane/CourseNavigationPane.component';\n\nimport CourseOverviewPane from './CourseOverviewPane/CourseOverviewPane.component';\nimport CreateChapterDialog from './Dialogs/CreateChapterDialog/CreateChapterDialog.component';\nimport CreateLessonDialog from './Dialogs/CreateLessonDialog/CreateLessonDialog.component';\nimport EditCourseOverviewDialog from './Dialogs/EditCourseOverviewDialog/EditCourseOverviewDialog.component';\nimport CreateCourseDialog from '../CreateCourse/CreateCourseDialog/CreateCourseDialog.component';\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\nimport DeleteDialog from './Dialogs/DeleteDialog/DeleteDialog.component';\n\n\n\n\nfunction CourseOverview(props) {\n    // Get ID from Route Params\n    let { id } = useParams();\n    // Create State Variables\n    const [course, setCourse] = useState();\n    const [error, setError] = useState();\n    const [isCreateChapterDialogOpen, setIsCreateChapterDialogOpen] = useState(false);\n    const [isCreateLessonDialogOpen, setIsCreateLessonDialogOpen] = useState(false);\n    const [isEditCourseOverviewDialogOpen, setIsEditCourseOverviewDialogOpen] = useState(false);\n    const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);\n    const [chapterInContext, setChapterInContext] = useState();\n    const [activeLesson, setActiveLesson] = useState();\n    const [addLesson, setAddLesson] = useState();\n    const [deleteType, setDeleteType] = useState();\n    const [objToDelete, setObjToDelete] = useState();\n    const [isDeleting, setIsDeleting] = useState(false);\n    const history = useHistory();\n\n\n    props.routeClicked(\"Course Overview\");\n\n\n\n    function handleCreateChapterClose() {\n        setIsCreateChapterDialogOpen(false);\n    }\n\n    function openCreateChapterDialog() {\n        setIsCreateChapterDialogOpen(true);\n    }\n\n    function handleCreateLessonDialogClose() {\n        setIsCreateLessonDialogOpen(false);\n    }\n\n    function openCreateLessonDialog(addLesson) {\n        setAddLesson(addLesson);\n        setIsCreateLessonDialogOpen(true);\n    }\n\n    function handleEditCourseOverviewDialogClose() {\n        setIsEditCourseOverviewDialogOpen(false);\n    }\n\n    function openEditCourseOverviewDialog() {\n        setIsEditCourseOverviewDialogOpen(true);\n    }\n\n    function viewPublished() {\n        props.history.push(`/courseOverview/${course.id}`);\n    }\n\n    function openDeleteDialog(deleteType, objToDelete){\n        setIsDeleteDialogOpen(true);\n        setDeleteType(deleteType);\n        setObjToDelete(objToDelete)\n    }\n\n    function handleCloseDeleteDialog(){\n        setIsDeleteDialogOpen(false);\n    }\n\n    async function handleDeleteSubmit(){\n\n        props.setDeletingCourse(true)\n\n        if (deleteType === 'Course') {\n            console.log(deleteType);\n            console.log(objToDelete);\n            await FirebaseService.deleteCourse(objToDelete);\n            await props.updateCourses()\n            await props.updateUser(props.user.id);\n            history.push('/courseLibrary');\n\n        } else if (deleteType === 'Lesson'){\n\n            await FirebaseService.deleteLesson(course, chapterInContext, objToDelete);\n            setActiveLesson();\n            setChapterInContext();\n            await props.updateCourses();\n            await props.updateUser(props.user.id);\n        }\n\n        props.setDeletingCourse(false);\n\n    }\n\n    async function updateLesson(lessonInfo, add) {\n       \n        await FirebaseService.updateLesson(course, chapterInContext, lessonInfo, add).then(() => {\n            console.log(\"HERE: \", chapterInContext)\n            getCourseById(id);\n            setAddLesson(add);\n            setIsCreateLessonDialogOpen(false);\n            // setChapterInContext()\n        }).catch((err) => { console.log(err) });\n    }\n\n    async function updateCourse(courseInfo) {\n        setIsEditCourseOverviewDialogOpen(false);\n        await FirebaseService.updateCourse(course.id, courseInfo);\n        props.updateCourses();\n        getCourseById(id);\n    }\n\n    async function addNewChapter(chapterInfo) {\n        await FirebaseService.addNewChapter(course, chapterInfo);\n        getCourseById(id);\n        setIsCreateChapterDialogOpen(false);\n    }\n\n\n    async function resolveLessons(chapter) {\n        const lessonsRefLength = chapter.lessonsRef?.length;\n        if (lessonsRefLength > 0) {\n            return Promise.all(\n                chapter.lessonsRef.map(async lessonRef => {\n                    const lesson = await FirebaseService.getDocFromDocRef(lessonRef)\n                    return lesson;\n                })\n            ).then(results => {\n                chapter.lessons = results;\n                return chapter;\n            });\n\n        } else {\n            return Promise.resolve(chapter);\n        }\n    }\n\n    async function resolveChapters(chapters) {\n        return Promise.all(chapters.map(chapter => resolveLessons(chapter)))\n    }\n\n    async function getCourseById(id) {\n            const course = await FirebaseService.getCourseById(id);\n            course.chapters = await resolveChapters(course.chapters);\n            const chapter = course.chapters.find( chapter => chapter.title === chapterInContext );\n            setChapterInContext(chapter);\n            setCourse(course);\n\n    }\n\n    useEffect(() => {\n        if (id && !props.isDeletingCourse) {\n            console.log(\"IS DELETING\", props.isDeletingCourse);\n            getCourseById(id);\n        }\n    }, []);\n\n    useEffect(() => {\n        // after adding/editing a lesson, ensure we navigate to the freshest version\n        if (course && chapterInContext) {\n            if (!addLesson) {\n                const updatedLesson = course.chapters[chapterInContext.id].lessons.find(lesson => {\n                    if (lesson.id === activeLesson.id) {\n                        return lesson;\n                    }\n                });\n                if (updatedLesson) {\n\n                    setActiveLesson(updatedLesson);\n                }\n            } else {\n                const lessons = course.chapters[chapterInContext.id].lessons;\n                setActiveLesson(lessons[lessons.length - 1]);\n            }\n        }\n    }, [course]);\n\n    let dialogs;\n    let viewPublishedCourseButton;\n    if (props.editable) {\n        dialogs = <div>\n            <CreateChapterDialog isOpen={isCreateChapterDialogOpen} handleSubmit={addNewChapter} handleClose={handleCreateChapterClose} />\n            <CreateLessonDialog \n                isOpen={isCreateLessonDialogOpen} \n                add={addLesson} \n                lesson={activeLesson} \n                updateLesson={updateLesson} \n                handleClose={handleCreateLessonDialogClose} />\n\n            <CreateCourseDialog\n                isOpen={isEditCourseOverviewDialogOpen}\n                handleClose={handleEditCourseOverviewDialogClose}\n                course={course}\n                handleSubmit={updateCourse}\n            />\n            <DeleteDialog\n                isOpen={isDeleteDialogOpen}\n                handleClose={handleCloseDeleteDialog}\n                handleSubmit={handleDeleteSubmit}\n                deleteType={deleteType}\n                objToDelete={objToDelete}\n            />\n        </div>\n\n        viewPublishedCourseButton = <Button variant=\"contained\" color=\"secondary\" onClick={viewPublished}> View Published Course </Button>\n    }\n\n\n\n    if (course) {\n        console.log(course);\n        console.log(chapterInContext);\n        return (\n            <div className=\"edit-course\">\n                <Grid container spacing={6}>\n                    <Grid item xs={3}>\n                        <CourseNavigationPane \n                            editable={props.editable} \n                            activeLesson={activeLesson} \n                            setActiveLesson={setActiveLesson} \n                            openLessonModal={openCreateLessonDialog} \n                            chapterInContext={chapterInContext} \n                            setChapterInContext={setChapterInContext} \n                            course={course} \n                            openCreateChapterDialog={openCreateChapterDialog}\n                            openDeleteDialog={openDeleteDialog}\n                            />\n                    </Grid>\n                    <Grid item xs={9}>\n                        <CourseOverviewPane \n                        setActiveLesson={setActiveLesson} \n                        setChapterInContext={setChapterInContext} \n                        editable={props.editable} \n                        activeChapter={chapterInContext} \n                        activeLesson={activeLesson} \n                        course={course} \n                        openEditCourseOverviewDialog={openEditCourseOverviewDialog} \n                        openLessonModal={openCreateLessonDialog} \n                        openDeleteDialog={openDeleteDialog}\n                        />\n                    </Grid>\n                    {viewPublishedCourseButton}\n                </Grid>\n                {dialogs}\n            </div>\n        );\n    } else {\n        return (\n            <div>\n                Loading...\n                <CircularProgress></CircularProgress>\n            </div>\n        )\n    }\n\n\n}\n\nexport default withRouter(CourseOverview);","import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport { AppBar, Toolbar, IconButton, Typography, Button, } from '@material-ui/core';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link as RouterLink,\n  Redirect,\n  withRouter,\n  browserHistory\n} from \"react-router-dom\";\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport CourseLibrary from './components/CourseLibrary/CourseLibrary';\nimport Login from './components/Login/Login';\nimport MyCourses from './components/MyCourses/MyCourses';\nimport UserProfile from './components/UserProfile/UserProfile';\nimport CreateCourse from './components/CreateCourse/CreateCourse.component';\nimport CourseOverview from './components/CourseOverview/CourseOverview.component';\nimport { MuiThemeProvider, ThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n\nimport * as FirebaseService from '../src/service/firebase.service'\n\nconst buttonTheme = createMuiTheme({\n  palette: {\n    primary: { // peaches\n      main: '#87618c',\n    },\n    secondary: {  // purples\n      main: '#442b4a',\n    },\n  },\n  typography: {\n    useNextVariants: true\n  },\n  overrides: {\n    MuiButton: {\n      root: {\n        textTransform: 'none',\n      },\n    },\n  },\n});\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: { // peaches\n      light: '#f44336',\n      main: '#f6eee7',\n      dark: '#dbbca1',\n    },\n    secondary: {  // purples\n      light: '#a17da5',\n      main: '#87618c',\n      dark: '#442b4a',\n    },\n  },\n  typography: {\n    useNextVariants: true\n  },\n  overrides: {\n    MuiButton: {\n      root: {\n        textTransform: 'none',\n      },\n    },\n  },\n})\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      courses: [],\n      users: [],\n      currentUser: undefined,\n      loadingUser: true,\n      myCourseSelected: false,\n      allCoursesSelected: false,\n      isDeletingCourse: false\n    };\n    this.fetchCourses = this.fetchCourses.bind(this);\n    this.fetchUsers = this.fetchUsers.bind(this);\n    this.render = this.render.bind(this);\n    this.updateUser = this.updateUser.bind(this);\n    this.setUser = this.setUser.bind(this);\n    this.getUserOnLoad = this.getUserOnLoad.bind(this);\n    this.routeClicked = this.routeClicked.bind(this);\n    this.deletingCourse = this.deletingCourse.bind(this);\n    this.fetchCourses().then(() => {\n      this.getUserOnLoad();\n    });\n  }\n\n  async updateUser(userId){\n    if (!userId) {\n      this.setState({ currentUser: undefined });\n      this.setState({ loadingUser: false });\n      return;\n    }\n    await FirebaseService.getUserById(userId)\n      .then(result => {\n        const user = result.data();\n\n        if (user.createdCoursesRefs && user.createdCoursesRefs.length > 0) {\n\n          const newCourses = user.createdCoursesRefs\n            .map(courseRef => this.state.courses.find(course => course.id === courseRef.id));\n\n          user.createdCourses = user.createdCoursesRefs\n            .map(courseRef => this.state.courses.find(course => course.id === courseRef.id));\n        }\n\n        if (user.pastCoursesRefs && user.pastCoursesRefs.length > 0) {\n          user.pastCourses = user.pastCoursesRefs\n            .map(courseRef => this.state.courses.find(course => course.id === courseRef.id));\n        }\n\n        if (user.favoritedCoursesRefs && user.favoritedCoursesRefs.length > 0) {\n          user.favoritedCourses = user.favoritedCoursesRefs\n            .map(courseRef => this.state.courses.find(course => course.id === courseRef.id));\n        }\n\n        this.setState({ currentUser: user });\n        this.setState({ loadingUser: false });\n\n      })\n  }\n\n  deletingCourse(value){\n    this.setState({\n        isDeletingCourse: value\n      }\n    )\n  }\n\n  getUserOnLoad() {\n    let user = FirebaseService.getCurrentUser();\n    if (user) {\n      this.updateUser(user.uid);\n    } else if (document.cookie.split(';').some((item) => item.trim().startsWith('userid='))) {\n      var cookieValue = document.cookie.replace(/(?:(?:^|.*;\\s*)userid\\s*\\=\\s*([^;]*).*$)|^.*$/, \"$1\");\n      this.updateUser(cookieValue);\n    } else {\n      this.updateUser(undefined);\n    }\n  }\n\n  setUser(user) {\n    this.updateUser(user.id);\n    document.cookie = `userid=${user.id}`;\n  }\n\n  async fetchCourses() {\n    let courses = [];\n    await FirebaseService.getAllCourses().then((queryResults) => {\n      queryResults.forEach((doc) => {\n        const course = doc.data();\n        const courseId = doc.id;\n        course.owner.get().then(user => {\n          course.owner = user.data();\n        })\n        // course.chapter.lessons.get().then(lesson => {\n        //   course.chapter.lessons = lesson.data();\n        // })\n        course.id = courseId\n        courses.push(course);\n        this.setState({ courses: courses });\n      });\n    });\n  }\n\n  async fetchUsers() {\n    let users = [];\n    await FirebaseService.getAllUsers()\n      .then((queryResults) => {\n        queryResults.forEach((doc) => {\n          const user = doc.data();\n          user.id = doc.id;\n          users.push(user);\n          this.setState({\n            users\n          })\n        })\n      })\n  }\n\n  routeClicked(location){\n    console.log(\"New Location: \", location);\n    if (location === \"Course Library\" && !this.state.allCoursesSelected){\n      this.setState({\n        allCoursesSelected: true,\n        myCourseSelected: false\n      })\n    } else if (location === \"My Courses\" && !this.state.myCourseSelected){\n      this.setState({\n        allCoursesSelected: false,\n        myCourseSelected: true\n      })\n    } else if ( (location !== \"Course Library\" && location !== \"My Courses\") && (this.state.allCoursesSelected || this.state.myCourseSelected)){\n      this.setState({\n        allCoursesSelected: false,\n        myCourseSelected: false\n      })\n    }\n  }\n\n  render() {\n\n    // If not logged in redirect to the login page with redirect info. Url will\n    // briefly flash to login while we figure out if we have a user.\n    const PrivateRoute = ({ isLoggedIn, ...props }) =>\n      this.state.currentUser\n        ? <Route {...props} />\n        : <Redirect to={{\n          pathname: '/login',\n          state: { from: props.location }\n        }} />\n\n    return (\n      <MuiThemeProvider theme={theme}>\n        <Router onChange={this.browserRouteChanged}>\n          <div>\n            <nav hidden={!this.state.currentUser}>\n              <AppBar position=\"static\">\n                <Toolbar>\n                  <MuiThemeProvider theme={buttonTheme}>\n                    <Button variant=\"contained\" color={ this.state.allCoursesSelected ? \"secondary\" : \"primary\"} className=\"menu-button main\" component={RouterLink} to=\"/courseLibrary\">All Courses</Button>\n                    <Button variant=\"contained\" color={ this.state.myCourseSelected ? \"secondary\" : \"primary\"} className=\"menu-button main\" component={RouterLink} to=\"/myCourses\">My Courses</Button>\n                  </MuiThemeProvider>\n                    <Button variant=\"outlined\" color=\"secondary\" className=\"menu-button align-left\" component={RouterLink} to=\"/createCourse\">Create a Course</Button>\n                  <IconButton className=\"menu-button profile-icon\" component={RouterLink} to=\"/profile\" color=\"inherit\" aria-label=\"menu\">\n                    <AccountCircleIcon />\n                  </IconButton>\n                </Toolbar>\n              </AppBar>\n            </nav>\n\n            {/* A <Switch> looks through its children <Route>s and\n                renders the first one that matches the current URL. */}\n            <Switch>\n              <Route exact path=\"/login\">\n                <Login routeClicked={this.routeClicked} completeLogin={this.setUser} user={this.state.currentUser} loadingUser={this.state.loadingUser} />\n              </Route>\n              <PrivateRoute path=\"/(courseLibrary|)\">\n                <CourseLibrary routeClicked={this.routeClicked} courses={this.state.courses} user={this.state.currentUser} updateUser={this.updateUser} />\n              </PrivateRoute>\n              <PrivateRoute path=\"/courseOverview/:id\">\n                <CourseOverview routeClicked={this.routeClicked}  editable={false} user={this.state.currentUser}></CourseOverview>\n              </PrivateRoute>\n              <PrivateRoute path=\"/myCourses\">\n                <MyCourses routeClicked={this.routeClicked} user={this.state.currentUser}></MyCourses>\n              </PrivateRoute>\n              <PrivateRoute path=\"/profile\">\n                <UserProfile routeClicked={this.routeClicked} user={this.state.currentUser} updateUser={this.updateUser}></UserProfile>\n              </PrivateRoute>\n              <PrivateRoute path=\"/createCourse\">\n                <CreateCourse routeClicked={this.routeClicked} user={this.state.currentUser} updateUser={this.updateUser} updateCourses={this.fetchCourses}></CreateCourse>\n              </PrivateRoute>\n              <PrivateRoute path=\"/editCourse/:id\">\n                <CourseOverview  setDeletingCourse={this.deletingCourse} isDeletingCourse={this.state.isDeletingCourse} routeClicked={this.routeClicked} editable={true}  user={this.state.currentUser} updateUser={this.updateUser}  updateCourses={this.fetchCourses}></CourseOverview>\n              </PrivateRoute>\n            </Switch>\n          </div>\n        </Router>\n      </MuiThemeProvider>\n    )\n  }\n};\n\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}